<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Switch - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>Switch</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 12.2 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
                  &bull; <a href="Switch.pdf">Download PDF</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-modules-S.html">Core modules (S)</a> &gt;
      
    
    Switch
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>Switch</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#BACKGROUND">BACKGROUND</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#Allowing-fall-through">Allowing fall-through</a><li><a href="#Automating-fall-through">Automating fall-through</a><li><a href="#Alternative-syntax">Alternative syntax</a><li><a href="#Higher-order-Operations">Higher-order Operations</a></ul><li><a href="#DEPENDENCIES">DEPENDENCIES</a><li><a href="#AUTHOR">AUTHOR</a><li><a href="#BUGS">BUGS</a><li><a href="#LIMITATIONS">LIMITATIONS</a><li><a href="#COPYRIGHT">COPYRIGHT</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>Switch - A switch statement for Perl</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span><span class="sc">;</span></li><li></li><li>    switch <span class="s">(</span><span class="i">$val</span><span class="s">)</span> <span class="s">{</span></li><li>	case <span class="n">1</span>		<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number 1&quot;</span> <span class="s">}</span></li><li>	case <span class="q">&quot;a&quot;</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;string a&quot;</span> <span class="s">}</span></li><li>	case <span class="s">[</span><span class="n">1</span>..<span class="n">10</span><span class="cm">,</span><span class="n">42</span><span class="s">]</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number in list&quot;</span> <span class="s">}</span></li><li>	case <span class="s">(</span>\<span class="i">@array</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;number in list&quot;</span> <span class="s">}</span></li><li>	case <span class="q">/\w+/</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;pattern&quot;</span> <span class="s">}</span></li><li>	case <span class="q">qr/\w+/</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;pattern&quot;</span> <span class="s">}</span></li><li>	case <span class="s">(</span>\<span class="i">%hash</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;entry in hash&quot;</span> <span class="s">}</span></li><li>	case <span class="s">(</span>\<span class="i">&amp;sub</span><span class="s">)</span>	<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;arg to subroutine&quot;</span> <span class="s">}</span></li><li>	else		<span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;previous case not true&quot;</span> <span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><a name="BACKGROUND"></a><h1>BACKGROUND</h1>
<p>[Skip ahead to <a href="#DESCRIPTION">DESCRIPTION</a> if you don't care about the whys
and wherefores of this control structure]</p>
<p>In seeking to devise a "Swiss Army" case mechanism suitable for Perl,
it is useful to generalize this notion of distributed conditional
testing as far as possible. Specifically, the concept of "matching"
between the switch value and the various case values need not be
restricted to numeric (or string or referential) equality, as it is in other 
languages. Indeed, as Table 1 illustrates, Perl
offers at least eighteen different ways in which two values could
generate a match.</p>
<pre class="verbatim"><ol><li>	Table 1: Matching a switch value ($s) with a case value ($c)</li><li></li><li>        Switch  Case    Type of Match Implied   Matching Code</li><li>        Value   Value   </li><li>        ======  =====   =====================   =============</li><li></li><li>        number  same    numeric or referential  match if $s == $c;</li><li>        or ref          equality</li><li></li><li>	object  method	result of method call   match if $s-&gt;$c();</li><li>	ref     name 				match if defined $s-&gt;$c();</li><li>		or ref</li><li></li><li>        other   other   string equality         match if $s eq $c;</li><li>        non-ref non-ref</li><li>        scalar  scalar</li><li></li><li>        string  regexp  pattern match           match if $s =~ /$c/;</li><li></li><li>        array   scalar  array entry existence   match if 0&lt;=$c &amp;&amp; $c&lt;@$s;</li><li>        ref             array entry definition  match if defined $s-&gt;[$c];</li><li>                        array entry truth       match if $s-&gt;[$c];</li><li></li><li>        array   array   array intersection      match if intersects(@$s, @$c);</li><li>        ref     ref     (apply this table to</li><li>                         all pairs of elements</li><li>                         $s-&gt;[$i] and</li><li>                         $c-&gt;[$j])</li><li></li><li>        array   regexp  array grep              match if grep /$c/, @$s;</li><li>        ref     </li><li></li><li>        hash    scalar  hash entry existence    match if exists $s-&gt;{$c};</li><li>        ref             hash entry definition   match if defined $s-&gt;{$c};</li><li>                        hash entry truth        match if $s-&gt;{$c};</li><li></li><li>        hash    regexp  hash grep               match if grep /$c/, keys %$s;</li><li>        ref     </li><li></li><li>        sub     scalar  return value defn       match if defined $s-&gt;($c);</li><li>        ref             return value truth      match if $s-&gt;($c);</li><li></li><li>        sub     array   return value defn       match if defined $s-&gt;(@$c);</li><li>        ref     ref     return value truth      match if $s-&gt;(@$c);</li></ol></pre><p>In reality, Table 1 covers 31 alternatives, because only the equality and
intersection tests are commutative; in all other cases, the roles of
the <code class="inline"><span class="i">$s</span></code>
 and <code class="inline"><span class="i">$c</span></code>
 variables could be reversed to produce a
different test. For example, instead of testing a single hash for
the existence of a series of keys (<code class="inline"><span class="w">match</span> if <a class="l_k" href="functions/exists.html">exists</a> <span class="i">$s</span>-&gt;{<span class="i">$c</span>}</code>
),
one could test for the existence of a single key in a series of hashes
(<code class="inline"><span class="w">match</span> if <a class="l_k" href="functions/exists.html">exists</a> <span class="i">$c</span>-&gt;{<span class="i">$s</span>}</code>
).</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>The Switch.pm module implements a generalized case mechanism that covers
most (but not all) of the numerous possible combinations of switch and case
values described above.</p>
<p>The module augments the standard Perl syntax with two new control
statements: <code class="inline">switch</code>
 and <code class="inline">case</code>
. The <code class="inline">switch</code>
 statement takes a
single scalar argument of any type, specified in parentheses.
<code class="inline">switch</code>
 stores this value as the
current switch value in a (localized) control variable.
The value is followed by a block which may contain one or more
Perl statements (including the <code class="inline">case</code>
 statement described below).
The block is unconditionally executed once the switch value has
been cached.</p>
<p>A <code class="inline">case</code>
 statement takes a single scalar argument (in mandatory
parentheses if it's a variable; otherwise the parens are optional) and
selects the appropriate type of matching between that argument and the
current switch value. The type of matching used is determined by the
respective types of the switch value and the <code class="inline">case</code>
 argument, as
specified in Table 1. If the match is successful, the mandatory
block associated with the <code class="inline">case</code>
 statement is executed.</p>
<p>In most other respects, the <code class="inline">case</code>
 statement is semantically identical
to an <code class="inline">if</code>
 statement. For example, it can be followed by an <code class="inline">else</code>

clause, and can be used as a postfix statement qualifier.</p>
<p>However, when a <code class="inline">case</code>
 block has been executed control is automatically
transferred to the statement after the immediately enclosing <code class="inline">switch</code>

block, rather than to the next statement within the block. In other
words, the success of any <code class="inline">case</code>
 statement prevents other cases in the
same scope from executing. But see <a href="#Allowing-fall-through">Allowing fall-through</a> below.</p>
<p>Together these two new statements provide a fully generalized case
mechanism:</p>
<pre class="verbatim"><ol><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span><span class="sc">;</span></li><li></li><li>        <span class="c"># AND LATER...</span></li><li></li><li>        <span class="i">%special</span> = <span class="s">(</span> <span class="w">woohoo</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="cm">,</span>  <span class="w">d&#39;oh</span> <span class="cm">=&gt;</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>        while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/chomp.html">chomp</a><span class="sc">;</span></li><li>            switch <span class="s">(</span><span class="i">$_</span><span class="s">)</span> <span class="s">{</span></li><li>                case <span class="s">(</span><span class="i">%special</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;homer\n&quot;</span><span class="sc">;</span> <span class="s">}</span>      <span class="c"># if $special{$_}</span></li><li>                case <span class="q">/[a-z]/i</span>   <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;alpha\n&quot;</span><span class="sc">;</span> <span class="s">}</span>      <span class="c"># if $_ =~ /a-z/i</span></li><li>                case <span class="s">[</span><span class="n">1</span>..<span class="n">9</span><span class="s">]</span>     <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;small num\n&quot;</span><span class="sc">;</span> <span class="s">}</span>  <span class="c"># if $_ in [1..9]</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &gt;= <span class="n">10</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;big num\n&quot;</span><span class="sc">;</span> <span class="s">}</span> <span class="c"># if $_ &gt;= 10</span></li><li>                <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;must be punctuation\n&quot;</span> case <span class="q">/\W/</span><span class="sc">;</span>  <span class="c"># if $_ ~= /\W/</span></li><li>	    <span class="s">}</span></li><li>        <span class="s">}</span></li></ol></pre><p>Note that <code class="inline">switch</code>
es can be nested within <code class="inline">case</code>
 (or any other) blocks,
and a series of <code class="inline">case</code>
 statements can try different types of matches
-- hash membership, pattern match, array intersection, simple equality,
etc. -- against the same switch value.</p>
<p>The use of intersection tests against an array reference is particularly
useful for aggregating integral cases:</p>
<pre class="verbatim"><ol><li><a name="classify_digit"></a>        sub <span class="m">classify_digit</span></li><li>        <span class="s">{</span></li><li>                switch <span class="s">(</span><span class="i">$_</span>[<span class="n">0</span>]<span class="s">)</span> <span class="s">{</span> case <span class="n">0</span>            <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'zero'</span> <span class="s">}</span></li><li>                                 case <span class="s">[</span><span class="n">2</span><span class="cm">,</span><span class="n">4</span><span class="cm">,</span><span class="n">6</span><span class="cm">,</span><span class="n">8</span><span class="s">]</span>    <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'even'</span> <span class="s">}</span></li><li>                                 case <span class="s">[</span><span class="n">1</span><span class="cm">,</span><span class="n">3</span><span class="cm">,</span><span class="n">5</span><span class="cm">,</span><span class="n">7</span><span class="cm">,</span><span class="n">9</span><span class="s">]</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'odd'</span> <span class="s">}</span></li><li>                                 case <span class="q">/[A-F]/i</span>     <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'hex'</span> <span class="s">}</span></li><li>                               <span class="s">}</span></li><li>        <span class="s">}</span></li></ol></pre><a name="Allowing-fall-through"></a><h2>Allowing fall-through</h2>
<p>Fall-though (trying another case after one has already succeeded)
is usually a Bad Idea in a switch statement. However, this
is Perl, not a police state, so there <i>is</i> a way to do it, if you must.</p>
<p>If a <code class="inline">case</code>
 block executes an untargeted <code class="inline"><a class="l_k" href="functions/next.html">next</a></code>, control is
immediately transferred to the statement <i>after</i> the <code class="inline">case</code>
 statement
(i.e. usually another case), rather than out of the surrounding
<code class="inline">switch</code>
 block.</p>
<p>For example:</p>
<pre class="verbatim"><ol><li>        switch <span class="s">(</span><span class="i">$val</span><span class="s">)</span> <span class="s">{</span></li><li>                case <span class="n">1</span>      <span class="s">{</span> <span class="i">handle_num_1</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/next.html">next</a> <span class="s">}</span>    <span class="c"># and try next case...</span></li><li>                case <span class="q">&quot;1&quot;</span>    <span class="s">{</span> <span class="i">handle_str_1</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/next.html">next</a> <span class="s">}</span>    <span class="c"># and try next case...</span></li><li>                case <span class="s">[</span><span class="n">0</span>..<span class="n">9</span><span class="s">]</span> <span class="s">{</span> <span class="i">handle_num_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span>       <span class="c"># and we&#39;re done</span></li><li>                case <span class="q">/\d/</span>   <span class="s">{</span> <span class="i">handle_dig_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/next.html">next</a> <span class="s">}</span>  <span class="c"># and try next case...</span></li><li>                case <span class="q">/.*/</span>   <span class="s">{</span> <span class="i">handle_str_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/next.html">next</a> <span class="s">}</span>  <span class="c"># and try next case...</span></li><li>        <span class="s">}</span></li></ol></pre><p>If $val held the number <code class="inline"><span class="n">1</span></code>
, the above <code class="inline">switch</code>
 block would call the
first three <code class="inline"><span class="w">handle_</span>...</code>
 subroutines, jumping to the next case test
each time it encountered a <code class="inline"><a class="l_k" href="functions/next.html">next</a></code>. After the third <code class="inline">case</code>
 block
was executed, control would jump to the end of the enclosing
<code class="inline">switch</code>
 block.</p>
<p>On the other hand, if $val held <code class="inline"><span class="n">10</span></code>
, then only the last two <code class="inline"><span class="w">handle_</span>...</code>

subroutines would be called.</p>
<p>Note that this mechanism allows the notion of <i>conditional fall-through</i>.
For example:</p>
<pre class="verbatim"><ol><li>        switch <span class="s">(</span><span class="i">$val</span><span class="s">)</span> <span class="s">{</span></li><li>                case <span class="s">[</span><span class="n">0</span>..<span class="n">9</span><span class="s">]</span> <span class="s">{</span> <span class="i">handle_num_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/next.html">next</a> if <span class="i">$val</span> &lt; <span class="n">7</span><span class="sc">;</span> <span class="s">}</span></li><li>                case <span class="q">/\d/</span>   <span class="s">{</span> <span class="i">handle_dig_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span></li><li>        <span class="s">}</span></li></ol></pre><p>If an untargeted <code class="inline"><a class="l_k" href="functions/last.html">last</a></code> statement is executed in a case block, this
immediately transfers control out of the enclosing <code class="inline">switch</code>
 block
(in other words, there is an implicit <code class="inline"><a class="l_k" href="functions/last.html">last</a></code> at the end of each
normal <code class="inline">case</code>
 block). Thus the previous example could also have been
written:</p>
<pre class="verbatim"><ol><li>        switch <span class="s">(</span><span class="i">$val</span><span class="s">)</span> <span class="s">{</span></li><li>                case <span class="s">[</span><span class="n">0</span>..<span class="n">9</span><span class="s">]</span> <span class="s">{</span> <span class="i">handle_num_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/last.html">last</a> if <span class="i">$val</span> &gt;= <span class="n">7</span><span class="sc">;</span> <a class="l_k" href="functions/next.html">next</a><span class="sc">;</span> <span class="s">}</span></li><li>                case <span class="q">/\d/</span>   <span class="s">{</span> <span class="i">handle_dig_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span></li><li>        <span class="s">}</span></li></ol></pre><a name="Automating-fall-through"></a><h2>Automating fall-through</h2>
<p>In situations where case fall-through should be the norm, rather than an
exception, an endless succession of terminal <code class="inline"><a class="l_k" href="functions/next.html">next</a></code>s is tedious and ugly.
Hence, it is possible to reverse the default behaviour by specifying
the string "fallthrough" when importing the module. For example, the 
following code is equivalent to the first example in <a href="#Allowing-fall-through">Allowing fall-through</a>:</p>
<pre class="verbatim"><ol><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span> <span class="q">&#39;fallthrough&#39;</span><span class="sc">;</span></li><li></li><li>        switch <span class="s">(</span><span class="i">$val</span><span class="s">)</span> <span class="s">{</span></li><li>                case <span class="n">1</span>      <span class="s">{</span> <span class="i">handle_num_1</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span></li><li>                case <span class="q">&quot;1&quot;</span>    <span class="s">{</span> <span class="i">handle_str_1</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span></li><li>                case <span class="s">[</span><span class="n">0</span>..<span class="n">9</span><span class="s">]</span> <span class="s">{</span> <span class="i">handle_num_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <a class="l_k" href="functions/last.html">last</a> <span class="s">}</span></li><li>                case <span class="q">/\d/</span>   <span class="s">{</span> <span class="i">handle_dig_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span></li><li>                case <span class="q">/.*/</span>   <span class="s">{</span> <span class="i">handle_str_any</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="s">}</span></li><li>        <span class="s">}</span></li></ol></pre><p>Note the explicit use of a <code class="inline"><a class="l_k" href="functions/last.html">last</a></code> to preserve the non-fall-through
behaviour of the third case.</p>
<a name="Alternative-syntax"></a><h2>Alternative syntax</h2>
<p>Perl 6 will provide a built-in switch statement with essentially the
same semantics as those offered by Switch.pm, but with a different
pair of keywords. In Perl 6 <code class="inline">switch</code>
 will be spelled <code class="inline">given</code>
, and
<code class="inline">case</code>
 will be pronounced <code class="inline">when</code>
. In addition, the <code class="inline">when</code>
 statement
will not require switch or case values to be parenthesized.</p>
<p>This future syntax is also (largely) available via the Switch.pm module, by
importing it with the argument <code class="inline"><span class="q">&quot;Perl6&quot;</span></code>
.  For example:</p>
<pre class="verbatim"><ol><li>        use Switch 'Perl6';</li><li></li><li>        given ($val) {</li><li>                when 1       { handle_num_1(); }</li><li>                when ($str1) { handle_str_1(); }</li><li>                when [0..9]  { handle_num_any(); last }</li><li>                when /\d/    { handle_dig_any(); }</li><li>                when /.*/    { handle_str_any(); }</li><li>                default      { handle anything else; }</li><li>        }</li></ol></pre><p>Note that scalars still need to be parenthesized, since they would be
ambiguous in Perl 5.</p>
<p>Note too that you can mix and match both syntaxes by importing the module
with:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span> <span class="q">&#39;Perl5&#39;</span><span class="cm">,</span> <span class="q">&#39;Perl6&#39;</span><span class="sc">;</span></li></ol></pre><a name="Higher-order-Operations"></a><h2>Higher-order Operations</h2>
<p>One situation in which <code class="inline">switch</code>
 and <code class="inline">case</code>
 do not provide a good
substitute for a cascaded <code class="inline">if</code>
, is where a switch value needs to
be tested against a series of conditions. For example:</p>
<pre class="verbatim"><ol><li><a name="beverage"></a>        sub <span class="m">beverage</span> <span class="s">{</span></li><li>            switch <span class="s">(</span><a class="l_k" href="functions/shift.html">shift</a><span class="s">)</span> <span class="s">{</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">10</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'milk'</span> <span class="s">}</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">20</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'coke'</span> <span class="s">}</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">30</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'beer'</span> <span class="s">}</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">40</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'wine'</span> <span class="s">}</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">50</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'malt'</span> <span class="s">}</span></li><li>                case <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">60</span> <span class="s">}</span> <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'Moet'</span> <span class="s">}</span></li><li>                else                <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">'milk'</span> <span class="s">}</span></li><li>            <span class="s">}</span></li><li>        <span class="s">}</span></li></ol></pre><p>(This is equivalent to writing <code class="inline">case <span class="s">(</span><a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">10</span> <span class="s">}</span><span class="s">)</span></code>
, etc.; <code class="inline"><span class="i">$_</span>[<span class="n">0</span>]</code>

is the argument to the anonymous subroutine.)</p>
<p>The need to specify each condition as a subroutine block is tiresome. To
overcome this, when importing Switch.pm, a special "placeholder"
subroutine named <code class="inline"><span class="w">__</span></code>
 [sic] may also be imported. This subroutine
converts (almost) any expression in which it appears to a reference to a
higher-order function. That is, the expression:</p>
<pre class="verbatim"><ol><li>        <a class="l_k" href="functions/use.html">use</a> <span class="w">Switch</span> <span class="q">&#39;__&#39;</span><span class="sc">;</span></li><li></li><li>        <span class="w">__</span> &lt; <span class="n">2</span></li></ol></pre><p>is equivalent to:</p>
<pre class="verbatim"><ol><li>        <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">2</span> <span class="s">}</span></li></ol></pre><p>With <code class="inline"><span class="w">__</span></code>
, the previous ugly case statements can be rewritten:</p>
<pre class="verbatim"><ol><li>        case  <span class="w">__</span> &lt; <span class="n">10</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;milk&#39;</span> <span class="s">}</span></li><li>        case  <span class="w">__</span> &lt; <span class="n">20</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;coke&#39;</span> <span class="s">}</span></li><li>        case  <span class="w">__</span> &lt; <span class="n">30</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;beer&#39;</span> <span class="s">}</span></li><li>        case  <span class="w">__</span> &lt; <span class="n">40</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;wine&#39;</span> <span class="s">}</span></li><li>        case  <span class="w">__</span> &lt; <span class="n">50</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;malt&#39;</span> <span class="s">}</span></li><li>        case  <span class="w">__</span> &lt; <span class="n">60</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;Moet&#39;</span> <span class="s">}</span></li><li>        else           <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;milk&#39;</span> <span class="s">}</span></li></ol></pre><p>The <code class="inline"><span class="w">__</span></code>
 subroutine makes extensive use of operator overloading to
perform its magic. All operations involving __ are overloaded to
produce an anonymous subroutine that implements a lazy version
of the original operation.</p>
<p>The only problem is that operator overloading does not allow the
boolean operators <code class="inline">&amp;&amp;</code> and <code class="inline">||</code> to be overloaded. So a case statement
like this:</p>
<pre class="verbatim"><ol><li>        case  <span class="n">0</span> &lt;= <span class="w">__</span> &amp;&amp; <span class="w">__</span> &lt; <span class="n">10</span>  <span class="s">{</span> <a class="l_k" href="functions/return.html">return</a> <span class="q">&#39;digit&#39;</span> <span class="s">}</span></li></ol></pre><p>doesn't act as expected, because when it is
executed, it constructs two higher order subroutines
and then treats the two resulting references as arguments to <code class="inline">&amp;&amp;</code>:</p>
<pre class="verbatim"><ol><li>        <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="n">0</span> &lt;= <span class="i">$_</span>[<span class="n">0</span>] <span class="s">}</span> &amp;&amp; <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] &lt; <span class="n">10</span> <span class="s">}</span></li></ol></pre><p>This boolean expression is inevitably true, since both references are
non-false. Fortunately, the overloaded <code class="inline"><span class="q">&#39;bool&#39;</span></code>
 operator catches this
situation and flags it as an error.</p>
<a name="DEPENDENCIES"></a><h1>DEPENDENCIES</h1>
<p>The module is implemented using Filter::Util::Call and Text::Balanced
and requires both these modules to be installed.</p>
<a name="AUTHOR"></a><h1>AUTHOR</h1>
<p>Damian Conway (damian@conway.org). This module is now maintained by Rafael
Garcia-Suarez (rgarciasuarez@gmail.com) and more generally by the Perl 5
Porters (perl5-porters@perl.org), as part of the Perl core.</p>
<a name="BUGS"></a><h1>BUGS</h1>
<p>There are undoubtedly serious bugs lurking somewhere in code this funky :-)
Bug reports and other feedback are most welcome.</p>
<a name="LIMITATIONS"></a><h1>LIMITATIONS</h1>
<p>Due to the heuristic nature of Switch.pm's source parsing, the presence of
regexes with embedded newlines that are specified with raw <code class="inline"><span class="q">/.../</span></code>

delimiters and don't have a modifier <code class="inline"><span class="q">//x</span></code>
 are indistinguishable from
code chunks beginning with the division operator <code class="inline">/</code>. As a workaround
you must use <code class="inline"><a class="l_k" href="functions/m.html">m/.../</a></code> or <code class="inline"><a class="l_k" href="functions/m.html">m?...?</a></code> for such patterns. Also, the presence
of regexes specified with raw <code class="inline"><span class="q">?...?</span></code>
 delimiters may cause mysterious
errors. The workaround is to use <code class="inline"><a class="l_k" href="functions/m.html">m?...?</a></code> instead.</p>
<p>Due to the way source filters work in Perl, you can't use Switch inside
an string <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>.</p>
<p>If your source file is longer then 1 million characters and you have a
switch statement that crosses the 1 million (or 2 million, etc.)
character boundary you will get mysterious errors. The workaround is to
use smaller source files.</p>
<a name="COPYRIGHT"></a><h1>COPYRIGHT</h1>
<pre class="verbatim"><ol><li>    Copyright (c) 1997-2008, Damian Conway. All Rights Reserved.</li><li>    This module is free software. It may be used, redistributed</li><li>        and/or modified under the same terms as Perl itself.</li></ol></pre>



  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#BACKGROUND">BACKGROUND</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#Allowing-fall-through">Allowing fall-through</a><li><a href="#Automating-fall-through">Automating fall-through</a><li><a href="#Alternative-syntax">Alternative syntax</a><li><a href="#Higher-order-Operations">Higher-order Operations</a></ul><li><a href="#DEPENDENCIES">DEPENDENCIES</a><li><a href="#AUTHOR">AUTHOR</a><li><a href="#BUGS">BUGS</a><li><a href="#LIMITATIONS">LIMITATIONS</a><li><a href="#COPYRIGHT">COPYRIGHT</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'Switch';
  perldoc.pageAddress = 'Switch.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>

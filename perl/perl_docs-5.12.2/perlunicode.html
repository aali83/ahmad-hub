<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perlunicode - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>perlunicode</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 12.2 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
                  &bull; <a href="perlunicode.pdf">Download PDF</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-language.html">Language reference</a> &gt;
      
    
    perlunicode
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perlunicode</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#Important-Caveats">Important Caveats</a><li><a href="#Byte-and-Character-Semantics">Byte and Character Semantics</a><li><a href="#Effects-of-Character-Semantics">Effects of Character Semantics</a><li><a href="#Unicode-Character-Properties">Unicode Character Properties</a><li><a href="#User-Defined-Character-Properties">User-Defined Character Properties</a><li><a href="#User-Defined-Case-Mappings">User-Defined Case Mappings</a><li><a href="#Character-Encodings-for-Input-and-Output">Character Encodings for Input and Output</a><li><a href="#Unicode-Regular-Expression-Support-Level">Unicode Regular Expression Support Level</a><li><a href="#Unicode-Encodings">Unicode Encodings</a><li><a href="#Security-Implications-of-Unicode">Security Implications of Unicode</a><li><a href="#Unicode-in-Perl-on-EBCDIC">Unicode in Perl on EBCDIC</a><li><a href="#Locales">Locales</a><li><a href="#When-Unicode-Does-Not-Happen">When Unicode Does Not Happen</a><li><a href="#The-%22Unicode-Bug%22">The "Unicode Bug"</a><li><a href="#Forcing-Unicode-in-Perl-(Or-Unforcing-Unicode-in-Perl)">Forcing Unicode in Perl (Or Unforcing Unicode in Perl)</a><li><a href="#Using-Unicode-in-XS">Using Unicode in XS</a><li><a href="#Hacking-Perl-to-work-on-earlier-Unicode-versions-(for-very-serious-hackers-only)">Hacking Perl to work on earlier Unicode versions (for very serious hackers only)</a></ul><li><a href="#BUGS">BUGS</a><ul><li><a href="#Interaction-with-Locales">Interaction with Locales</a><li><a href="#Problems-with-characters-in-the-Latin-1-Supplement-range">Problems with characters in the Latin-1 Supplement range</a><li><a href="#Problems-with-case-insensitive-regular-expression-matching">Problems with case-insensitive regular expression matching</a><li><a href="#Interaction-with-Extensions">Interaction with Extensions</a><li><a href="#Speed">Speed</a><li><a href="#Problems-on-EBCDIC-platforms">Problems on EBCDIC platforms</a><li><a href="#Porting-code-from-perl-5.6.X">Porting code from perl-5.6.X</a></ul><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perlunicode - Unicode support in Perl</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<a name="Important-Caveats"></a><h2>Important Caveats</h2>
<p>Unicode support is an extensive requirement. While Perl does not
implement the Unicode standard or the accompanying technical reports
from cover to cover, Perl does support many Unicode features.</p>
<p>People who want to learn to use Unicode in Perl, should probably read
<a href="perlunitut.html">the Perl Unicode tutorial, perlunitut</a>, before reading
this reference document.</p>
<ul>
<li><a name="Input-and-Output-Layers"></a><b>Input and Output Layers</b>
<p>Perl knows when a filehandle uses Perl's internal Unicode encodings
(UTF-8, or UTF-EBCDIC if in EBCDIC) if the filehandle is opened with
the ":utf8" layer.  Other encodings can be converted to Perl's
encoding on input or from Perl's encoding on output by use of the
":encoding(...)"  layer.  See <a href="open.html">open</a>.</p>
<p>To indicate that Perl source itself is in UTF-8, use <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span><span class="sc">;</span></code>
.</p>
</li>
<li><a name="Regular-Expressions"></a><b>Regular Expressions</b>
<p>The regular expression compiler produces polymorphic opcodes.  That is,
the pattern adapts to the data and automatically switches to the Unicode
character scheme when presented with data that is internally encoded in
UTF-8, or instead uses a traditional byte scheme when presented with
byte data.</p>
</li>
<li><a name="use-utf8-still-needed-to-enable-UTF-8%2fUTF-EBCDIC-in-scripts"></a><b><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
 still needed to enable UTF-8/UTF-EBCDIC in scripts</b>
<p>As a compatibility measure, the <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
 pragma must be explicitly
included to enable recognition of UTF-8 in the Perl scripts themselves
(in string or regular expression literals, or in identifier names) on
ASCII-based machines or to recognize UTF-EBCDIC on EBCDIC-based
machines.  <b>These are the only times when an explicit <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>

is needed.</b>  See <a href="utf8.html">utf8</a>.</p>
</li>
<li><a name="BOM-marked-scripts-and-UTF-16-scripts-autodetected"></a><b>BOM-marked scripts and UTF-16 scripts autodetected</b>
<p>If a Perl script begins marked with the Unicode BOM (UTF-16LE, UTF16-BE,
or UTF-8), or if the script looks like non-BOM-marked UTF-16 of either
endianness, Perl will correctly read in the script as Unicode.
(BOMless UTF-8 cannot be effectively recognized or differentiated from
ISO 8859-1 or other eight-bit encodings.)</p>
</li>
<li><a name="use-encoding-needed-to-upgrade-non-Latin-1-byte-strings"></a><b><code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">encoding</span></code>
 needed to upgrade non-Latin-1 byte strings</b>
<p>By default, there is a fundamental asymmetry in Perl's Unicode model:
implicit upgrading from byte strings to Unicode strings assumes that
they were encoded in <i>ISO 8859-1 (Latin-1)</i>, but Unicode strings are
downgraded with UTF-8 encoding.  This happens because the first 256
codepoints in Unicode happens to agree with Latin-1.</p>
<p>See <a href="#Byte-and-Character-Semantics">Byte and Character Semantics</a> for more details.</p>
</li>
</ul>
<a name="Byte-and-Character-Semantics"></a><h2>Byte and Character Semantics</h2>
<p>Beginning with version 5.6, Perl uses logically-wide characters to
represent strings internally.</p>
<p>In future, Perl-level operations will be expected to work with
characters rather than bytes.</p>
<p>However, as an interim compatibility measure, Perl aims to
provide a safe migration path from byte semantics to character
semantics for programs.  For operations where Perl can unambiguously
decide that the input data are characters, Perl switches to
character semantics.  For operations where this determination cannot
be made without additional information from the user, Perl decides in
favor of compatibility and chooses to use byte semantics.</p>
<p>Under byte semantics, when <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 is in effect, Perl uses the
semantics associated with the current locale.  Absent a <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
, and
absent a <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
 pragma, Perl currently uses US-ASCII
(or Basic Latin in Unicode terminology) byte semantics, meaning that characters
whose ordinal numbers are in the range 128 - 255 are undefined except for their
ordinal numbers.  This means that none have case (upper and lower), nor are any
a member of character classes, like <code class="inline">[:alpha:]</code> or <code class="inline">\<span class="w">w</span></code>
.  (But all do belong
to the <code class="inline">\<span class="w">W</span></code>
 class or the Perl regular expression extension <code class="inline">[:^alpha:]</code>.)</p>
<p>This behavior preserves compatibility with earlier versions of Perl,
which allowed byte semantics in Perl operations only if
none of the program's inputs were marked as being a source of Unicode
character data.  Such data may come from filehandles, from calls to
external programs, from information provided by the system (such as %ENV),
or from literals and constants in the source text.</p>
<p>The <code class="inline"><span class="w">bytes</span></code>
 pragma will always, regardless of platform, force byte
semantics in a particular lexical scope.  See <a href="bytes.html">bytes</a>.</p>
<p>The <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
 pragma is intended to always, regardless
of platform, force Unicode semantics in a particular lexical scope.  In
release 5.12, it is partially implemented, applying only to case changes.
See <a href="#The-%22Unicode-Bug%22">The Unicode Bug</a> below.</p>
<p>The <code class="inline"><span class="w">utf8</span></code>
 pragma is primarily a compatibility device that enables
recognition of UTF-(8|EBCDIC) in literals encountered by the parser.
Note that this pragma is only required while Perl defaults to byte
semantics; when character semantics become the default, this pragma
may become a no-op.  See <a href="utf8.html">utf8</a>.</p>
<p>Unless explicitly stated, Perl operators use character semantics
for Unicode data and byte semantics for non-Unicode data.
The decision to use character semantics is made transparently.  If
input data comes from a Unicode source--for example, if a character
encoding layer is added to a filehandle or a literal Unicode
string constant appears in a program--character semantics apply.
Otherwise, byte semantics are in effect.  The <code class="inline"><span class="w">bytes</span></code>
 pragma should
be used to force byte semantics on Unicode data, and the <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span>
<span class="q">&#39;unicode_strings&#39;</span></code>
 pragma to force Unicode semantics on byte data (though in
5.12 it isn't fully implemented).</p>
<p>If strings operating under byte semantics and strings with Unicode
character data are concatenated, the new string will have
character semantics.  This can cause surprises: See <a href="#BUGS">BUGS</a>, below.
You can choose to be warned when this happens.  See <a href="encoding/warnings.html">encoding::warnings</a>.</p>
<p>Under character semantics, many operations that formerly operated on
bytes now operate on characters. A character in Perl is
logically just a number ranging from 0 to 2**31 or so. Larger
characters may encode into longer sequences of bytes internally, but
this internal detail is mostly hidden for Perl code.
See <a href="perluniintro.html">perluniintro</a> for more.</p>
<a name="Effects-of-Character-Semantics"></a><h2>Effects of Character Semantics</h2>
<p>Character semantics have the following effects:</p>
<ul>
<li>
<p>Strings--including hash keys--and regular expression patterns may
contain characters that have an ordinal value larger than 255.</p>
<p>If you use a Unicode editor to edit your program, Unicode characters may
occur directly within the literal strings in UTF-8 encoding, or UTF-16.
(The former requires a BOM or <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
, the latter requires a BOM.)</p>
<p>Unicode characters can also be added to a string by using the <code class="inline">\<span class="i">N</span><span class="s">{</span><span class="w">U</span>+...<span class="s">}</span></code>

notation.  The Unicode code for the desired character, in hexadecimal,
should be placed in the braces, after the <code class="inline"><span class="w">U</span></code>
. For instance, a smiley face is
<code class="inline">\N{U+263A}</code>.</p>
<p>Alternatively, you can use the <code class="inline">\<span class="i">x</span><span class="s">{</span>...<span class="s">}</span></code>
 notation for characters 0x100 and
above.  For characters below 0x100 you may get byte semantics instead of
character semantics;  see <a href="#The-%22Unicode-Bug%22">The Unicode Bug</a>.  On EBCDIC machines there is
the additional problem that the value for such characters gives the EBCDIC
character rather than the Unicode one.</p>
<p>Additionally, if you</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">&#39;:full&#39;</span><span class="sc">;</span></li></ol></pre><p>you can use the <code class="inline">\<span class="i">N</span><span class="s">{</span>...<span class="s">}</span></code>
 notation and put the official Unicode
character name within the braces, such as <code class="inline">\<span class="i">N</span><span class="s">{</span><span class="w">WHITE</span> <span class="w">SMILING</span> <span class="w">FACE</span><span class="s">}</span></code>
.
See <a href="charnames.html">charnames</a>.</p>
</li>
<li>
<p>If an appropriate <a href="encoding.html">encoding</a> is specified, identifiers within the
Perl script may contain Unicode alphanumeric characters, including
ideographs.  Perl does not currently attempt to canonicalize variable
names.</p>
</li>
<li>
<p>Regular expressions match characters instead of bytes.  "." matches
a character instead of a byte.</p>
</li>
<li>
<p>Character classes in regular expressions match characters instead of
bytes and match against the character properties specified in the
Unicode properties database.  <code class="inline">\<span class="w">w</span></code>
 can be used to match a Japanese
ideograph, for instance.</p>
</li>
<li>
<p>Named Unicode properties, scripts, and block ranges may be used like
character classes via the <code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 "matches property" construct and
the <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 negation, "doesn't match property".
See <a href="#Unicode-Character-Properties">Unicode Character Properties</a> for more details.</p>
<p>You can define your own character properties and use them
in the regular expression with the <code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 or <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 construct.
See <a href="#User-Defined-Character-Properties">User-Defined Character Properties</a> for more details.</p>
</li>
<li>
<p>The special pattern <code class="inline">\<span class="w">X</span></code>
 matches a logical character, an "extended grapheme
cluster" in Standardese.  In Unicode what appears to the user to be a single
character, for example an accented <code class="inline"><span class="w">G</span></code>
, may in fact be composed of a sequence
of characters, in this case a <code class="inline"><span class="w">G</span></code>
 followed by an accent character.  <code class="inline">\<span class="w">X</span></code>

will match the entire sequence.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> operator translates characters instead of bytes.  Note
that the <code class="inline"><a class="l_k" href="functions/tr.html">tr///CU</a></code> functionality has been removed.  For similar
functionality see pack('U0', ...) and pack('C0', ...).</p>
</li>
<li>
<p>Case translation operators use the Unicode case translation tables
when character input is provided.  Note that <code class="inline"><a class="l_k" href="functions/uc.html">uc()</a></code>, or <code class="inline">\<span class="w">U</span></code>
 in
interpolated strings, translates to uppercase, while <code class="inline"><a class="l_k" href="functions/ucfirst.html">ucfirst</a></code>,
or <code class="inline">\<span class="w">u</span></code>
 in interpolated strings, translates to titlecase in languages
that make the distinction (which is equivalent to uppercase in languages
without the distinction).</p>
</li>
<li>
<p>Most operators that deal with positions or lengths in a string will
automatically switch to using character positions, including
<code class="inline"><a class="l_k" href="functions/chop.html">chop()</a></code>, <code class="inline"><a class="l_k" href="functions/chomp.html">chomp()</a></code>, <code class="inline"><a class="l_k" href="functions/substr.html">substr()</a></code>, <code class="inline"><a class="l_k" href="functions/pos.html">pos()</a></code>, <code class="inline"><a class="l_k" href="functions/index.html">index()</a></code>, <code class="inline"><a class="l_k" href="functions/rindex.html">rindex()</a></code>,
<code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf()</a></code>, <code class="inline"><a class="l_k" href="functions/write.html">write()</a></code>, and <code class="inline"><a class="l_k" href="functions/length.html">length()</a></code>.  An operator that
specifically does not switch is <code class="inline"><a class="l_k" href="functions/vec.html">vec()</a></code>.  Operators that really don't
care include operators that treat strings as a bucket of bits such as
<code class="inline"><a class="l_k" href="functions/sort.html">sort()</a></code>, and operators dealing with filenames.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/pack.html">pack()</a></code>/<code class="inline"><a class="l_k" href="functions/unpack.html">unpack()</a></code> letter <code class="inline"><span class="w">C</span></code>
 does <i>not</i> change, since it is often
used for byte-oriented formats.  Again, think <code class="inline"><span class="w">char</span></code>
 in the C language.</p>
<p>There is a new <code class="inline"><span class="w">U</span></code>
 specifier that converts between Unicode characters
and code points. There is also a <code class="inline"><span class="w">W</span></code>
 specifier that is the equivalent of
<code class="inline"><a class="l_k" href="functions/chr.html">chr</a></code>/<code class="inline"><a class="l_k" href="functions/ord.html">ord</a></code> and properly handles character values even if they are above 255.</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/chr.html">chr()</a></code> and <code class="inline"><a class="l_k" href="functions/ord.html">ord()</a></code> functions work on characters, similar to
<code class="inline"><a class="l_k" href="functions/pack.html">pack("W")</a></code> and <code class="inline"><a class="l_k" href="functions/unpack.html">unpack("W")</a></code>, <i>not</i> <code class="inline"><a class="l_k" href="functions/pack.html">pack("C")</a></code> and
<code class="inline"><a class="l_k" href="functions/unpack.html">unpack("C")</a></code>.  <code class="inline"><a class="l_k" href="functions/pack.html">pack("C")</a></code> and <code class="inline"><a class="l_k" href="functions/unpack.html">unpack("C")</a></code> are methods for
emulating byte-oriented <code class="inline"><a class="l_k" href="functions/chr.html">chr()</a></code> and <code class="inline"><a class="l_k" href="functions/ord.html">ord()</a></code> on Unicode strings.
While these methods reveal the internal encoding of Unicode strings,
that is not something one normally needs to care about at all.</p>
</li>
<li>
<p>The bit string operators, <code class="inline"><span class="i">&amp; |</span> ^ ~</code>
, can operate on character data.
However, for backward compatibility, such as when using bit string
operations when characters are all less than 256 in ordinal value, one
should not use <code class="inline">~</code>
 (the bit complement) with characters of both
values less than 256 and values greater than 256.  Most importantly,
DeMorgan's laws (<code class="inline">~<span class="s">(</span><span class="i">$x</span>|<span class="i">$y</span><span class="s">)</span> eq ~<span class="i">$x</span>&amp;~<span class="i">$y</span></code>
 and <code class="inline">~<span class="s">(</span><span class="i">$x</span>&amp;<span class="i">$y</span><span class="s">)</span> eq ~<span class="i">$x</span>|~<span class="i">$y</span></code>
)
will not hold.  The reason for this mathematical <i>faux pas</i> is that
the complement cannot return <b>both</b> the 8-bit (byte-wide) bit
complement <b>and</b> the full character-wide bit complement.</p>
</li>
<li>
<p>You can define your own mappings to be used in lc(),
lcfirst(), uc(), and ucfirst() (or their string-inlined versions).
See <a href="#User-Defined-Case-Mappings">User-Defined Case Mappings</a> for more details.</p>
</li>
</ul>
<ul>
<li>
<p>And finally, <code class="inline"><a class="l_k" href="functions/scalar.html">scalar</a> <a class="l_k" href="functions/reverse.html">reverse</a><span class="s">(</span><span class="s">)</span></code>
 reverses by character rather than by byte.</p>
</li>
</ul>
<a name="Unicode-Character-Properties"></a><h2>Unicode Character Properties</h2>
<p>Most Unicode character properties are accessible by using regular expressions.
They are used like character classes via the <code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 "matches property"
construct and the <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 negation, "doesn't match property".</p>
<p>For instance, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Uppercase</span><span class="s">}</span></code>
 matches any character with the Unicode
"Uppercase" property, while <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">L</span><span class="s">}</span></code>
 matches any character with a
General_Category of "L" (letter) property.  Brackets are not
required for single letter properties, so <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">L</span><span class="s">}</span></code>
 is equivalent to <code class="inline">\<span class="w">pL</span></code>
.</p>
<p>More formally, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Uppercase</span><span class="s">}</span></code>
 matches any character whose Unicode Uppercase
property value is True, and <code class="inline">\<span class="i">P</span><span class="s">{</span><span class="w">Uppercase</span><span class="s">}</span></code>
 matches any character whose
Uppercase property value is False, and they could have been written as
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Uppercase</span>=<span class="w">True</span><span class="s">}</span></code>
 and <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Uppercase</span>=<span class="w">False</span><span class="s">}</span></code>
, respectively</p>
<p>This formality is needed when properties are not binary, that is if they can
take on more values than just True and False.  For example, the Bidi_Class (see
<a href="#Bidirectional-Character-Types">Bidirectional Character Types</a> below), can take on a number of different
values, such as Left, Right, Whitespace, and others.  To match these, one needs
to specify the property name (Bidi_Class), and the value being matched against
(Left, Right, <i>etc.</i>).  This is done, as in the examples above, by having the
two components separated by an equal sign (or interchangeably, a colon), like
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Bidi_Class:</span> <span class="w">Left</span><span class="s">}</span></code>
.</p>
<p>All Unicode-defined character properties may be written in these compound forms
of <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">property</span>=<span class="w">value</span><span class="s">}</span></code>
 or <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">property:</span><span class="w">value</span><span class="s">}</span></code>
, but Perl provides some
additional properties that are written only in the single form, as well as
single-form short-cuts for all binary properties and certain others described
below, in which you may omit the property name and the equals or colon
separator.</p>
<p>Most Unicode character properties have at least two synonyms (or aliases if you
prefer), a short one that is easier to type, and a longer one which is more
descriptive and hence it is easier to understand what it means.  Thus the "L"
and "Letter" above are equivalent and can be used interchangeably.  Likewise,
"Upper" is a synonym for "Uppercase", and we could have written
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Uppercase</span><span class="s">}</span></code>
 equivalently as <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Upper</span><span class="s">}</span></code>
.  Also, there are typically
various synonyms for the values the property can be.   For binary properties,
"True" has 3 synonyms: "T", "Yes", and "Y"; and "False has correspondingly "F",
"No", and "N".  But be careful.  A short form of a value for one property may
not mean the same thing as the same short form for another.  Thus, for the
General_Category property, "L" means "Letter", but for the Bidi_Class property,
"L" means "Left".  A complete list of properties and synonyms is in
<a href="perluniprops.html">perluniprops</a>.</p>
<p>Upper/lower case differences in the property names and values are irrelevant,
thus <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Upper</span><span class="s">}</span></code>
 means the same thing as <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">upper</span><span class="s">}</span></code>
 or even <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">UpPeR</span><span class="s">}</span></code>
.
Similarly, you can add or subtract underscores anywhere in the middle of a
word, so that these are also equivalent to <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">U_p_p_e_r</span><span class="s">}</span></code>
.  And white space
is irrelevant adjacent to non-word characters, such as the braces and the equals
or colon separators so <code class="inline">\<span class="i">p</span><span class="s">{</span>   <span class="w">Upper</span>  <span class="s">}</span></code>
 and <code class="inline">\<span class="i">p</span><span class="s">{</span> <span class="j">Upper_case :</span> <span class="w">Y</span> <span class="s">}</span></code>
 are
equivalent to these as well.  In fact, in most cases, white space and even
hyphens can be added or deleted anywhere.  So even <code class="inline">\<span class="i">p</span><span class="s">{</span> <span class="w">Up</span>-<span class="w">per</span> case = <span class="w">Yes</span><span class="s">}</span></code>
 is
equivalent.  All this is called "loose-matching" by Unicode.  The few places
where stricter matching is employed is in the middle of numbers, and the Perl
extension properties that begin or end with an underscore.  Stricter matching
cares about white space (except adjacent to the non-word characters) and
hyphens, and non-interior underscores.</p>
<p>You can also use negation in both <code class="inline">\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 and <code class="inline">\<span class="w">P</span><span class="s">{</span><span class="s">}</span></code>
 by introducing a caret
(^) between the first brace and the property name: <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">^Tamil</span><span class="s">}</span></code>
 is
equal to <code class="inline">\<span class="i">P</span><span class="s">{</span><span class="w">Tamil</span><span class="s">}</span></code>
.</p>
<a name="*General_Category*"></a><h3><b>General_Category</b></h3>
<p>Every Unicode character is assigned a general category, which is the "most
usual categorization of a character" (from
<a href="http://www.unicode.org/reports/tr44">http://www.unicode.org/reports/tr44</a>).</p>
<p>The compound way of writing these is like <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">General_Category</span>=<span class="w">Number</span><span class="s">}</span></code>

(short, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">gc:</span><span class="w">n</span><span class="s">}</span></code>
).  But Perl furnishes shortcuts in which everything up
through the equal or colon separator is omitted.  So you can instead just write
<code class="inline">\<span class="w">pN</span></code>
.</p>
<p>Here are the short and long forms of the General Category properties:</p>
<pre class="verbatim"><ol><li>    Short       Long</li><li></li><li>    L           Letter</li><li>    LC, L&amp;      Cased_Letter (that is: [\p{Ll}\p{Lu}\p{Lt}])</li><li>    Lu          Uppercase_Letter</li><li>    Ll          Lowercase_Letter</li><li>    Lt          Titlecase_Letter</li><li>    Lm          Modifier_Letter</li><li>    Lo          Other_Letter</li><li></li><li>    M           Mark</li><li>    Mn          Nonspacing_Mark</li><li>    Mc          Spacing_Mark</li><li>    Me          Enclosing_Mark</li><li></li><li>    N           Number</li><li>    Nd          Decimal_Number (also Digit)</li><li>    Nl          Letter_Number</li><li>    No          Other_Number</li><li></li><li>    P           Punctuation (also Punct)</li><li>    Pc          Connector_Punctuation</li><li>    Pd          Dash_Punctuation</li><li>    Ps          Open_Punctuation</li><li>    Pe          Close_Punctuation</li><li>    Pi          Initial_Punctuation</li><li>                (may behave like Ps or Pe depending on usage)</li><li>    Pf          Final_Punctuation</li><li>                (may behave like Ps or Pe depending on usage)</li><li>    Po          Other_Punctuation</li><li></li><li>    S           Symbol</li><li>    Sm          Math_Symbol</li><li>    Sc          Currency_Symbol</li><li>    Sk          Modifier_Symbol</li><li>    So          Other_Symbol</li><li></li><li>    Z           Separator</li><li>    Zs          Space_Separator</li><li>    Zl          Line_Separator</li><li>    Zp          Paragraph_Separator</li><li></li><li>    C           Other</li><li>    Cc          Control	(also Cntrl)</li><li>    Cf          Format</li><li>    Cs          Surrogate   (not usable)</li><li>    Co          Private_Use</li><li>    Cn          Unassigned</li></ol></pre><p>Single-letter properties match all characters in any of the
two-letter sub-properties starting with the same letter.
<code class="inline"><span class="w">LC</span></code>
 and <code class="inline"><span class="w">L</span><span class="i">&amp;</span></code>
 are special cases, which are aliases for the set of
<code class="inline"><span class="w">Ll</span></code>
, <code class="inline"><span class="w">Lu</span></code>
, and <code class="inline"><span class="w">Lt</span></code>
.</p>
<p>Because Perl hides the need for the user to understand the internal
representation of Unicode characters, there is no need to implement
the somewhat messy concept of surrogates. <code class="inline"><span class="w">Cs</span></code>
 is therefore not
supported.</p>
<a name="*Bidirectional-Character-Types*"></a><h3><b>Bidirectional Character Types</b></h3>
<p>Because scripts differ in their directionality--Hebrew is
written right to left, for example--Unicode supplies these properties in
the Bidi_Class class:</p>
<pre class="verbatim"><ol><li>    <span class="w">Property</span>    <span class="w">Meaning</span></li><li></li><li>    <span class="w">L</span>           <span class="w">Left</span>-<span class="w">to</span>-<span class="w">Right</span></li><li>    <span class="w">LRE</span>         <span class="w">Left</span>-<span class="w">to</span>-<span class="w">Right</span> <span class="w">Embedding</span></li><li>    <span class="w">LRO</span>         <span class="w">Left</span>-<span class="w">to</span>-<span class="w">Right</span> <span class="w">Override</span></li><li>    <span class="w">R</span>           <span class="w">Right</span>-<span class="w">to</span>-<span class="w">Left</span></li><li>    <span class="w">AL</span>          <span class="w">Arabic</span> <span class="w">Letter</span></li><li>    <span class="w">RLE</span>         <span class="w">Right</span>-<span class="w">to</span>-<span class="w">Left</span> <span class="w">Embedding</span></li><li>    <span class="w">RLO</span>         <span class="w">Right</span>-<span class="w">to</span>-<span class="w">Left</span> <span class="w">Override</span></li><li>    <span class="w">PDF</span>         <span class="w">Pop</span> <span class="w">Directional</span> <span class="w">Format</span></li><li>    <span class="w">EN</span>          <span class="w">European</span> <span class="w">Number</span></li><li>    <span class="w">ES</span>          <span class="w">European</span> <span class="w">Separator</span></li><li>    <span class="w">ET</span>          <span class="w">European</span> <span class="w">Terminator</span></li><li>    <span class="w">AN</span>          <span class="w">Arabic</span> <span class="w">Number</span></li><li>    <span class="w">CS</span>          <span class="w">Common</span> <span class="w">Separator</span></li><li>    <span class="w">NSM</span>         <span class="w">Non</span>-<span class="w">Spacing</span> <span class="w">Mark</span></li><li>    <span class="w">BN</span>          <span class="w">Boundary</span> <span class="w">Neutral</span></li><li>    <span class="w">B</span>           <span class="w">Paragraph</span> <span class="w">Separator</span></li><li>    <span class="w">S</span>           <span class="w">Segment</span> <span class="w">Separator</span></li><li>    <span class="w">WS</span>          <span class="w">Whitespace</span></li><li>    <span class="w">ON</span>          <span class="w">Other</span> <span class="w">Neutrals</span></li></ol></pre><p>This property is always written in the compound form.
For example, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Bidi_Class:</span><span class="w">R</span><span class="s">}</span></code>
 matches characters that are normally
written right to left.</p>
<a name="*Scripts*"></a><h3><b>Scripts</b></h3>
<p>The world's languages are written in a number of scripts.  This sentence
(unless you're reading it in translation) is written in Latin, while Russian is
written in Cyrllic, and Greek is written in, well, Greek; Japanese mainly in
Hiragana or Katakana.  There are many more.</p>
<p>The Unicode Script property gives what script a given character is in,
and can be matched with the compound form like <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Script</span>=<span class="w">Hebrew</span><span class="s">}</span></code>
 (short:
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">sc</span>=<span class="w">hebr</span><span class="s">}</span></code>
).  Perl furnishes shortcuts for all script names.  You can omit
everything up through the equals (or colon), and simply write <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Latin</span><span class="s">}</span></code>
 or
<code class="inline">\<span class="i">P</span><span class="s">{</span><span class="w">Cyrillic</span><span class="s">}</span></code>
.</p>
<p>A complete list of scripts and their shortcuts is in <a href="perluniprops.html">perluniprops</a>.</p>
<a name="*Use-of-%22Is%22-Prefix*"></a><h3><b>Use of "Is" Prefix</b></h3>
<p>For backward compatibility (with Perl 5.6), all properties mentioned
so far may have <code class="inline"><span class="w">Is</span></code>
 or <code class="inline"><span class="w">Is_</span></code>
 prepended to their name, so <code class="inline">\<span class="i">P</span><span class="s">{</span><span class="w">Is_Lu</span><span class="s">}</span></code>
, for
example, is equal to <code class="inline">\<span class="i">P</span><span class="s">{</span><span class="w">Lu</span><span class="s">}</span></code>
, and <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">IsScript:</span><span class="w">Arabic</span><span class="s">}</span></code>
 is equal to
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Arabic</span><span class="s">}</span></code>
.</p>
<a name="*Blocks*"></a><h3><b>Blocks</b></h3>
<p>In addition to <b>scripts</b>, Unicode also defines <b>blocks</b> of
characters.  The difference between scripts and blocks is that the
concept of scripts is closer to natural languages, while the concept
of blocks is more of an artificial grouping based on groups of Unicode
characters with consecutive ordinal values. For example, the "Basic Latin"
block is all characters whose ordinals are between 0 and 127, inclusive, in
other words, the ASCII characters.  The "Latin" script contains some letters
from this block as well as several more, like "Latin-1 Supplement",
"Latin Extended-A", <i>etc.</i>, but it does not contain all the characters from
those blocks. It does not, for example, contain digits, because digits are
shared across many scripts. Digits and similar groups, like punctuation, are in
the script called <code class="inline"><span class="w">Common</span></code>
.  There is also a script called <code class="inline"><span class="w">Inherited</span></code>
 for
characters that modify other characters, and inherit the script value of the
controlling character.</p>
<p>For more about scripts versus blocks, see UAX#24 "Unicode Script Property":
<a href="http://www.unicode.org/reports/tr24">http://www.unicode.org/reports/tr24</a></p>
<p>The Script property is likely to be the one you want to use when processing
natural language; the Block property may be useful in working with the nuts and
bolts of Unicode.</p>
<p>Block names are matched in the compound form, like <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Block:</span> <span class="w">Arrows</span><span class="s">}</span></code>
 or
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Blk</span>=<span class="w">Hebrew</span><span class="s">}</span></code>
.  Unlike most other properties only a few block names have a
Unicode-defined short name.  But Perl does provide a (slight) shortcut:  You
can say, for example <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">In_Arrows</span><span class="s">}</span></code>
 or <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">In_Hebrew</span><span class="s">}</span></code>
.  For backwards
compatibility, the <code class="inline"><span class="w">In</span></code>
 prefix may be omitted if there is no naming conflict
with a script or any other property, and you can even use an <code class="inline"><span class="w">Is</span></code>
 prefix
instead in those cases.  But it is not a good idea to do this, for a couple
reasons:</p>
<dl>
<dt>1</dt><dd>
<p>It is confusing.  There are many naming conflicts, and you may forget some.
For example, <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Hebrew</span><span class="s">}</span></code>
 means the <i>script</i> Hebrew, and NOT the <i>block</i>
Hebrew.  But would you remember that 6 months from now?</p>
</dd>
<dt>2</dt><dd>
<p>It is unstable.  A new version of Unicode may pre-empt the current meaning by
creating a property with the same name.  There was a time in very early Unicode
releases when <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Hebrew</span><span class="s">}</span></code>
 would have matched the <i>block</i> Hebrew; now it
doesn't.</p>
</dd>
</dl>
<p>Some people just prefer to always use <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Block:</span> <span class="w">foo</span><span class="s">}</span></code>
 and <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Script:</span> <span class="w">bar</span><span class="s">}</span></code>

instead of the shortcuts, for clarity, and because they can't remember the
difference between 'In' and 'Is' anyway (or aren't confident that those who
eventually will read their code will know).</p>
<p>A complete list of blocks and their shortcuts is in <a href="perluniprops.html">perluniprops</a>.</p>
<a name="*Other-Properties*"></a><h3><b>Other Properties</b></h3>
<p>There are many more properties than the very basic ones described here.
A complete list is in <a href="perluniprops.html">perluniprops</a>.</p>
<p>Unicode defines all its properties in the compound form, so all single-form
properties are Perl extensions.  A number of these are just synonyms for the
Unicode ones, but some are genunine extensions, including a couple that are in
the compound form.  And quite a few of these are actually recommended by Unicode
(in <a href="http://www.unicode.org/reports/tr18">http://www.unicode.org/reports/tr18</a>).</p>
<p>This section gives some details on all the extensions that aren't synonyms for
compound-form Unicode properties (for those, you'll have to refer to the
<a href="http://search.cpan.org/perldoc/http:#%2fwww.unicode.org%2freports%2ftr44">Unicode Standard</a>.</p>
<ul>
<li><a name="*%5cp%7bAll%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">All</span><span class="s">}</span></code>
</b></b>
<p>This matches any of the 1_114_112 Unicode code points.  It is a synonym for
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Any</span><span class="s">}</span></code>
.</p>
</li>
<li><a name="*%5cp%7bAlnum%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Alnum</span><span class="s">}</span></code>
</b></b>
<p>This matches any <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Alphabetic</span><span class="s">}</span></code>
 or <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Decimal_Number</span><span class="s">}</span></code>
 character.</p>
</li>
<li><a name="*%5cp%7bAny%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Any</span><span class="s">}</span></code>
</b></b>
<p>This matches any of the 1_114_112 Unicode code points.  It is a synonym for
<code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">All</span><span class="s">}</span></code>
.</p>
</li>
<li><a name="*%5cp%7bAssigned%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Assigned</span><span class="s">}</span></code>
</b></b>
<p>This matches any assigned code point; that is, any code point whose general
category is not Unassigned (or equivalently, not Cn).</p>
</li>
<li><a name="*%5cp%7bBlank%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Blank</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\<span class="w">h</span></code>
 and <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">HorizSpace</span><span class="s">}</span></code>
:  A character that changes the
spacing horizontally.</p>
</li>
<li><a name="*%5cp%7bDecomposition_Type%3a-Non_Canonical%7d*----(Short%3a-%5cp%7bDt%3dNonCanon%7d)"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Decomposition_Type:</span> <span class="w">Non_Canonical</span><span class="s">}</span></code>
</b>    (Short: <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Dt</span>=<span class="w">NonCanon</span><span class="s">}</span></code>
)</b>
<p>Matches a character that has a non-canonical decomposition.</p>
<p>To understand the use of this rarely used property=value combination, it is
necessary to know some basics about decomposition.
Consider a character, say H.  It could appear with various marks around it,
such as an acute accent, or a circumflex, or various hooks, circles, arrows,
<i>etc.</i>, above, below, to one side and/or the other, <i>etc.</i>  There are many
possibilities among the world's languages.  The number of combinations is
astronomical, and if there were a character for each combination, it would
soon exhaust Unicode's more than a million possible characters.  So Unicode
took a different approach: there is a character for the base H, and a
character for each of the possible marks, and they can be combined variously
to get a final logical character.  So a logical character--what appears to be a
single character--can be a sequence of more than one individual characters.
This is called an "extended grapheme cluster".  (Perl furnishes the <code class="inline">\<span class="w">X</span></code>

construct to match such sequences.)</p>
<p>But Unicode's intent is to unify the existing character set standards and
practices, and a number of pre-existing standards have single characters that
mean the same thing as some of these combinations.  An example is ISO-8859-1,
which has quite a few of these in the Latin-1 range, an example being "LATIN
CAPITAL LETTER E WITH ACUTE".  Because this character was in this pre-existing
standard, Unicode added it to its repertoire.  But this character is considered
by Unicode to be equivalent to the sequence consisting of first the character
"LATIN CAPITAL LETTER E", then the character "COMBINING ACUTE ACCENT".</p>
<p>"LATIN CAPITAL LETTER E WITH ACUTE" is called a "pre-composed" character, and
the equivalence with the sequence is called canonical equivalence.  All
pre-composed characters are said to have a decomposition (into the equivalent
sequence) and the decomposition type is also called canonical.</p>
<p>However, many more characters have a different type of decomposition, a
"compatible" or "non-canonical" decomposition.  The sequences that form these
decompositions are not considered canonically equivalent to the pre-composed
character.  An example, again in the Latin-1 range, is the "SUPERSCRIPT ONE".
It is kind of like a regular digit 1, but not exactly; its decomposition
into the digit 1 is called a "compatible" decomposition, specifically a
"super" decomposition.  There are several such compatibility
decompositions (see <a href="http://www.unicode.org/reports/tr44">http://www.unicode.org/reports/tr44</a>), including one
called "compat" which means some miscellaneous type of decomposition
that doesn't fit into the decomposition categories that Unicode has chosen.</p>
<p>Note that most Unicode characters don't have a decomposition, so their
decomposition type is "None".</p>
<p>Perl has added the <code class="inline"><span class="w">Non_Canonical</span></code>
 type, for your convenience, to mean any of
the compatibility decompositions.</p>
</li>
<li><a name="*%5cp%7bGraph%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Graph</span><span class="s">}</span></code>
</b></b>
<p>Matches any character that is graphic.  Theoretically, this means a character
that on a printer would cause ink to be used.</p>
</li>
<li><a name="*%5cp%7bHorizSpace%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">HorizSpace</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\<span class="w">h</span></code>
 and <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Blank</span><span class="s">}</span></code>
:  A character that changes the
spacing horizontally.</p>
</li>
<li><a name="*%5cp%7bIn%3d*%7d*"></a><b><b><code class="inline">\p{In=*}</code></b></b>
<p>This is a synonym for <code class="inline">\p{Present_In=*}</code></p>
</li>
<li><a name="*%5cp%7bPerlSpace%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PerlSpace</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\s</code>, restricted to ASCII, namely <code class="inline"><span class="s">[</span> \<span class="w">f</span>\<span class="w">n</span>\<span class="w">r</span>\<span class="w">t</span><span class="s">]</span></code>
.</p>
<p>Mnemonic: Perl's (original) space</p>
</li>
<li><a name="*%5cp%7bPerlWord%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PerlWord</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\<span class="w">w</span></code>
, restricted to ASCII, namely <code class="inline"><span class="s">[</span><span class="w">A</span>-<span class="w">Za</span>-<span class="w">z0</span>-<span class="n">9_</span><span class="s">]</span></code>
</p>
<p>Mnemonic: Perl's (original) word.</p>
</li>
<li><a name="*%5cp%7bPosixAlnum%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixAlnum</span><span class="s">}</span></code>
</b></b>
<p>This matches any alphanumeric character in the ASCII range, namely
<code class="inline"><span class="s">[</span><span class="w">A</span>-<span class="w">Za</span>-<span class="w">z0</span>-<span class="n">9</span><span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPosixAlpha%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixAlpha</span><span class="s">}</span></code>
</b></b>
<p>This matches any alphabetic character in the ASCII range, namely <code class="inline"><span class="s">[</span><span class="w">A</span>-<span class="w">Za</span>-z<span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPosixBlank%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixBlank</span><span class="s">}</span></code>
</b></b>
<p>This matches any blank character in the ASCII range, namely <code class="inline"><span class="s">[</span> \<span class="w">t</span><span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPosixCntrl%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixCntrl</span><span class="s">}</span></code>
</b></b>
<p>This matches any control character in the ASCII range, namely <code class="inline"><span class="s">[</span>\<span class="w">x00</span>-\<span class="w">x1F</span>\<span class="w">x7F</span><span class="s">]</span></code>
</p>
</li>
<li><a name="*%5cp%7bPosixDigit%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixDigit</span><span class="s">}</span></code>
</b></b>
<p>This matches any digit character in the ASCII range, namely <code class="inline"><span class="s">[</span><span class="n">0</span>-<span class="n">9</span><span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPosixGraph%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixGraph</span><span class="s">}</span></code>
</b></b>
<p>This matches any graphical character in the ASCII range, namely <code class="inline"><span class="s">[</span>\<span class="w">x21</span>-\<span class="w">x7E</span><span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPosixLower%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixLower</span><span class="s">}</span></code>
</b></b>
<p>This matches any lowercase character in the ASCII range, namely <code class="inline"><span class="s">[</span><span class="w">a</span>-z<span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPosixPrint%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixPrint</span><span class="s">}</span></code>
</b></b>
<p>This matches any printable character in the ASCII range, namely <code class="inline"><span class="s">[</span>\<span class="w">x20</span>-\<span class="w">x7E</span><span class="s">]</span></code>
.
These are the graphical characters plus SPACE.</p>
</li>
<li><a name="*%5cp%7bPosixPunct%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixPunct</span><span class="s">}</span></code>
</b></b>
<p>This matches any punctuation character in the ASCII range, namely
<code class="inline"><span class="s">[</span>\<span class="w">x21</span>-\<span class="w">x2F</span>\<span class="w">x3A</span>-\<span class="w">x40</span>\<span class="w">x5B</span>-\<span class="w">x60</span>\<span class="w">x7B</span>-\<span class="w">x7E</span><span class="s">]</span></code>
.  These are the
graphical characters that aren't word characters.  Note that the Posix standard
includes in its definition of punctuation, those characters that Unicode calls
"symbols."</p>
</li>
<li><a name="*%5cp%7bPosixSpace%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixSpace</span><span class="s">}</span></code>
</b></b>
<p>This matches any space character in the ASCII range, namely
<code class="inline"><span class="s">[</span> \<span class="w">f</span>\<span class="w">n</span>\<span class="w">r</span>\<span class="w">t</span>\<span class="w">x0B</span><span class="s">]</span></code>
 (the last being a vertical tab).</p>
</li>
<li><a name="*%5cp%7bPosixUpper%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">PosixUpper</span><span class="s">}</span></code>
</b></b>
<p>This matches any uppercase character in the ASCII range, namely <code class="inline"><span class="s">[</span><span class="w">A</span>-<span class="w">Z</span><span class="s">]</span></code>
.</p>
</li>
<li><a name="*%5cp%7bPresent_In%3a-*%7d*----(Short%3a-%5cp%7bIn%3d*%7d)"></a><b><b><code class="inline">\p{Present_In: *}</code></b>    (Short: <code class="inline">\p{In=*}</code>)</b>
<p>This property is used when you need to know in what Unicode version(s) a
character is.</p>
<p>The "*" above stands for some two digit Unicode version number, such as
<code class="inline"><span class="n">1.1</span></code>
 or <code class="inline"><span class="n">4.0</span></code>
; or the "*" can also be <code class="inline"><span class="w">Unassigned</span></code>
.  This property will
match the code points whose final disposition has been settled as of the
Unicode release given by the version number; <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Present_In:</span> <span class="w">Unassigned</span><span class="s">}</span></code>

will match those code points whose meaning has yet to be assigned.</p>
<p>For example, <code class="inline"><span class="w">U</span>+<span class="n">0041</span></code>
 "LATIN CAPITAL LETTER A" was present in the very first
Unicode release available, which is <code class="inline"><span class="n">1.1</span></code>
, so this property is true for all
valid "*" versions.  On the other hand, <code class="inline">U+1EFF</code> was not assigned until version
5.1 when it became "LATIN SMALL LETTER Y WITH LOOP", so the only "*" that
would match it are 5.1, 5.2, and later.</p>
<p>Unicode furnishes the <code class="inline"><span class="w">Age</span></code>
 property from which this is derived.  The problem
with Age is that a strict interpretation of it (which Perl takes) has it
matching the precise release a code point's meaning is introduced in.  Thus
<code class="inline"><span class="w">U</span>+<span class="n">0041</span></code>
 would match only 1.1; and <code class="inline">U+1EFF</code> only 5.1.  This is not usually what
you want.</p>
<p>Some non-Perl implementations of the Age property may change its meaning to be
the same as the Perl Present_In property; just be aware of that.</p>
<p>Another confusion with both these properties is that the definition is not
that the code point has been assigned, but that the meaning of the code point
has been determined.  This is because 66 code points will always be
unassigned, and, so the Age for them is the Unicode version the decision to
make them so was made in.  For example, <code class="inline"><span class="w">U</span>+<span class="w">FDD0</span></code>
 is to be permanently
unassigned to a character, and the decision to do that was made in version 3.1,
so <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Age</span>=<span class="n">3.1</span><span class="s">}</span></code>
 matches this character and <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="j">Present_In:</span> <span class="n">3.1</span><span class="s">}</span></code>
 and up
matches as well.</p>
</li>
<li><a name="*%5cp%7bPrint%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Print</span><span class="s">}</span></code>
</b></b>
<p>This matches any character that is graphical or blank, except controls.</p>
</li>
<li><a name="*%5cp%7bSpacePerl%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">SpacePerl</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\s</code>, including beyond ASCII.</p>
<p>Mnemonic: Space, as modified by Perl.  (It doesn't include the vertical tab
which both the Posix standard and Unicode consider to be space.)</p>
</li>
<li><a name="*%5cp%7bVertSpace%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">VertSpace</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\<span class="w">v</span></code>
:  A character that changes the spacing vertically.</p>
</li>
<li><a name="*%5cp%7bWord%7d*"></a><b><b><code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Word</span><span class="s">}</span></code>
</b></b>
<p>This is the same as <code class="inline">\<span class="w">w</span></code>
, including beyond ASCII.</p>
</li>
</ul>
<a name="User-Defined-Character-Properties"></a><h2>User-Defined Character Properties</h2>
<p>You can define your own binary character properties by defining subroutines
whose names begin with "In" or "Is".  The subroutines can be defined in any
package.  The user-defined properties can be used in the regular expression
<code class="inline">\<span class="w">p</span></code>
 and <code class="inline">\<span class="w">P</span></code>
 constructs; if you are using a user-defined property from a
package other than the one you are in, you must specify its package in the
<code class="inline">\<span class="w">p</span></code>
 or <code class="inline">\<span class="w">P</span></code>
 construct.</p>
<pre class="verbatim"><ol><li>    <span class="c"># assuming property Is_Foreign defined in Lang::</span></li><li><a name="package-main"></a>    package <span class="i">main</span><span class="sc">;</span>  <span class="c"># property package name required</span></li><li>    if <span class="s">(</span><span class="i">$txt</span> =~ <span class="q">/\p{Lang::IsForeign}+/</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></li><li></li><li><a name="package-Lang"></a>    package <span class="i">Lang</span><span class="sc">;</span>  <span class="c"># property package name not required</span></li><li>    if <span class="s">(</span><span class="i">$txt</span> =~ <span class="q">/\p{IsForeign}+/</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></li></ol></pre><p>Note that the effect is compile-time and immutable once defined.</p>
<p>The subroutines must return a specially-formatted string, with one
or more newline-separated lines.  Each line must be one of the following:</p>
<ul>
<li>
<p>A single hexadecimal number denoting a Unicode code point to include.</p>
</li>
<li>
<p>Two hexadecimal numbers separated by horizontal whitespace (space or
tabular characters) denoting a range of Unicode code points to include.</p>
</li>
<li>
<p>Something to include, prefixed by "+": a built-in character
property (prefixed by "utf8::") or a user-defined character property,
to represent all the characters in that property; two hexadecimal code
points for a range; or a single hexadecimal code point.</p>
</li>
<li>
<p>Something to exclude, prefixed by "-": an existing character
property (prefixed by "utf8::") or a user-defined character property,
to represent all the characters in that property; two hexadecimal code
points for a range; or a single hexadecimal code point.</p>
</li>
<li>
<p>Something to negate, prefixed "!": an existing character
property (prefixed by "utf8::") or a user-defined character property,
to represent all the characters in that property; two hexadecimal code
points for a range; or a single hexadecimal code point.</p>
</li>
<li>
<p>Something to intersect with, prefixed by "&amp;": an existing character
property (prefixed by "utf8::") or a user-defined character property,
for all the characters except the characters in the property; two
hexadecimal code points for a range; or a single hexadecimal code point.</p>
</li>
</ul>
<p>For example, to define a property that covers both the Japanese
syllabaries (hiragana and katakana), you can define</p>
<pre class="verbatim"><ol><li>    sub InKana {</li><li>	return &lt;&lt;END;</li><li>    3040\t309F</li><li>    30A0\t30FF</li><li>    END</li><li>    }</li></ol></pre><p>Imagine that the here-doc end marker is at the beginning of the line.
Now you can use <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">InKana</span><span class="s">}</span></code>
 and <code class="inline">\<span class="i">P</span><span class="s">{</span><span class="w">InKana</span><span class="s">}</span></code>
.</p>
<p>You could also have used the existing block property names:</p>
<pre class="verbatim"><ol><li>    sub InKana {</li><li>	return &lt;&lt;'END';</li><li>    +utf8::InHiragana</li><li>    +utf8::InKatakana</li><li>    END</li><li>    }</li></ol></pre><p>Suppose you wanted to match only the allocated characters,
not the raw block ranges: in other words, you want to remove
the non-characters:</p>
<pre class="verbatim"><ol><li>    sub InKana {</li><li>	return &lt;&lt;'END';</li><li>    +utf8::InHiragana</li><li>    +utf8::InKatakana</li><li>    -utf8::IsCn</li><li>    END</li><li>    }</li></ol></pre><p>The negation is useful for defining (surprise!) negated classes.</p>
<pre class="verbatim"><ol><li>    sub InNotKana {</li><li>	return &lt;&lt;'END';</li><li>    !utf8::InHiragana</li><li>    -utf8::InKatakana</li><li>    +utf8::IsCn</li><li>    END</li><li>    }</li></ol></pre><p>Intersection is useful for getting the common characters matched by
two (or more) classes.</p>
<pre class="verbatim"><ol><li>    sub InFooAndBar {</li><li>        return &lt;&lt;'END';</li><li>    +main::Foo</li><li>    &amp;main::Bar</li><li>    END</li><li>    }</li></ol></pre><p>It's important to remember not to use "&amp;" for the first set; that
would be intersecting with nothing (resulting in an empty set).</p>
<a name="User-Defined-Case-Mappings"></a><h2>User-Defined Case Mappings</h2>
<p>You can also define your own mappings to be used in the lc(),
lcfirst(), uc(), and ucfirst() (or their string-inlined versions).
The principle is similar to that of user-defined character
properties: to define subroutines
with names like <code class="inline"><span class="w">ToLower</span></code>
 (for lc() and lcfirst()), <code class="inline"><span class="w">ToTitle</span></code>
 (for
the first character in ucfirst()), and <code class="inline"><span class="w">ToUpper</span></code>
 (for uc(), and the
rest of the characters in ucfirst()).</p>
<p>The string returned by the subroutines needs to be two hexadecimal numbers
separated by two tabulators: the two numbers being, respectively, the source
code point and the destination code point.  For example:</p>
<pre class="verbatim"><ol><li>    sub ToUpper {</li><li>	return &lt;&lt;END;</li><li>    0061\t\t0041</li><li>    END</li><li>    }</li></ol></pre><p>defines an uc() mapping that causes only the character "a"
to be mapped to "A"; all other characters will remain unchanged.</p>
<p>(For serious hackers only)  The above means you have to furnish a complete
mapping; you can't just override a couple of characters and leave the rest
unchanged.  You can find all the mappings in the directory
<code class="inline"><span class="i">$Config</span>{<span class="w">privlib</span>}</code>
/<i>unicore/To/</i>.  The mapping data is returned as the
here-document, and the <code class="inline"><span class="w">utf8::ToSpecFoo</span></code>
 are special exception mappings
derived from &lt;$Config{privlib}&gt;/<i>unicore/SpecialCasing.txt</i>.  The "Digit" and
"Fold" mappings that one can see in the directory are not directly
user-accessible, one can use either the <code class="inline"><span class="w">Unicode::UCD</span></code>
 module, or just match
case-insensitively (that's when the "Fold" mapping is used).</p>
<p>The mappings will only take effect on scalars that have been marked as having
Unicode characters, for example by using <code class="inline"><span class="i">utf8::upgrade</span><span class="s">(</span><span class="s">)</span></code>
.
Old byte-style strings are not affected.</p>
<p>The mappings are in effect for the package they are defined in.</p>
<a name="Character-Encodings-for-Input-and-Output"></a><h2>Character Encodings for Input and Output</h2>
<p>See <a href="Encode.html">Encode</a>.</p>
<a name="Unicode-Regular-Expression-Support-Level"></a><h2>Unicode Regular Expression Support Level</h2>
<p>The following list of Unicode support for regular expressions describes
all the features currently supported.  The references to "Level N"
and the section numbers refer to the Unicode Technical Standard #18,
"Unicode Regular Expressions", version 11, in May 2005.</p>
<ul>
<li>
<p>Level 1 - Basic Unicode Support</p>
<pre class="verbatim"><ol><li>        RL1.1   Hex Notation                        - done          [1]</li><li>        RL1.2   Properties                          - done          [2][3]</li><li>        RL1.2a  Compatibility Properties            - done          [4]</li><li>        RL1.3   Subtraction and Intersection        - MISSING       [5]</li><li>        RL1.4   Simple Word Boundaries              - done          [6]</li><li>        RL1.5   Simple Loose Matches                - done          [7]</li><li>        RL1.6   Line Boundaries                     - MISSING       [8]</li><li>        RL1.7   Supplementary Code Points           - done          [9]</li><li></li><li>        [1]  \x{...}</li><li>        [2]  \p{...} \P{...}</li><li>	[3]  supports not only minimal list, but all Unicode character</li><li>	     properties (see L&lt;/Unicode Character Properties&gt;)</li><li>        [4]  \d \D \s \S \w \W \X [:prop:] [:^prop:]</li><li>        [5]  can use regular expression look-ahead [a] or</li><li>             user-defined character properties [b] to emulate set operations</li><li>        [6]  \b \B</li><li>	[7]  note that Perl does Full case-folding in matching (but with bugs),</li><li>	     not Simple: for example U+1F88 is equivalent to U+1F00 U+03B9,</li><li>             not with 1F80.  This difference matters mainly for certain Greek</li><li>             capital letters with certain modifiers: the Full case-folding</li><li>             decomposes the letter, while the Simple case-folding would map</li><li>             it to a single character.</li><li>        [8]  should do ^ and $ also on U+000B (\v in C), FF (\f), CR (\r),</li><li>             CRLF (\r\n), NEL (U+0085), LS (U+2028), and PS (U+2029);</li><li>             should also affect &lt;&gt;, $., and script line numbers;</li><li>             should not split lines within CRLF [c] (i.e. there is no empty</li><li>             line between \r and \n)</li><li>        [9]  UTF-8/UTF-EBDDIC used in perl allows not only U+10000 to U+10FFFF</li><li>             but also beyond U+10FFFF [d]</li></ol></pre><p>[a] You can mimic class subtraction using lookahead.
For example, what UTS#18 might write as</p>
<pre class="verbatim"><ol><li>    <span class="s">[</span><span class="s">{</span><span class="w">Greek</span><span class="s">}</span>-<span class="s">[</span><span class="s">{</span><span class="w">UNASSIGNED</span><span class="s">}</span><span class="s">]</span><span class="s">]</span></li></ol></pre><p>in Perl can be written as:</p>
<pre class="verbatim"><ol><li>    <span class="s">(</span><span class="q">?!\p{Unassigned})\p{InGreekAndCoptic}</span></li><li>    <span class="q">    (?</span>=\<span class="i">p</span><span class="s">{</span><span class="w">Assigned</span><span class="s">}</span><span class="s">)</span>\<span class="i">p</span><span class="s">{</span><span class="w">InGreekAndCoptic</span><span class="s">}</span></li></ol></pre><p>But in this particular example, you probably really want</p>
<pre class="verbatim"><ol><li>    \<span class="i">p</span><span class="s">{</span><span class="w">GreekAndCoptic</span><span class="s">}</span></li></ol></pre><p>which will match assigned characters known to be part of the Greek script.</p>
<p>Also see the Unicode::Regex::Set module, it does implement the full
UTS#18 grouping, intersection, union, and removal (subtraction) syntax.</p>
<p>[b] '+' for union, '-' for removal (set-difference), '&amp;' for intersection
(see <a href="#User-Defined-Character-Properties">User-Defined Character Properties</a>)</p>
<p>[c] Try the <code class="inline"><span class="j">:</span><span class="w">crlf</span></code>
 layer (see <a href="PerlIO.html">PerlIO</a>).</p>
<p>[d] U+FFFF will currently generate a warning message if 'utf8' warnings are
    enabled</p>
</li>
<li>
<p>Level 2 - Extended Unicode Support</p>
<pre class="verbatim"><ol><li>        RL2.1   Canonical Equivalents           - MISSING       [10][11]</li><li>        RL2.2   Default Grapheme Clusters       - MISSING       [12]</li><li>        RL2.3   Default Word Boundaries         - MISSING       [14]</li><li>        RL2.4   Default Loose Matches           - MISSING       [15]</li><li>        RL2.5   Name Properties                 - MISSING       [16]</li><li>        RL2.6   Wildcard Properties             - MISSING</li><li></li><li>        [10] see UAX#15 "Unicode Normalization Forms"</li><li>        [11] have Unicode::Normalize but not integrated to regexes</li><li>        [12] have \X but we don't have a "Grapheme Cluster Mode"</li><li>        [14] see UAX#29, Word Boundaries</li><li>        [15] see UAX#21 "Case Mappings"</li><li>        [16] have \N{...} but neither compute names of CJK Ideographs</li><li>             and Hangul Syllables nor use a loose match [e]</li></ol></pre><p>[e] <code class="inline">\<span class="i">N</span><span class="s">{</span>...<span class="s">}</span></code>
 allows namespaces (see <a href="charnames.html">charnames</a>).</p>
</li>
<li>
<p>Level 3 - Tailored Support</p>
<pre class="verbatim"><ol><li>        RL3.1   Tailored Punctuation            - MISSING</li><li>        RL3.2   Tailored Grapheme Clusters      - MISSING       [17][18]</li><li>        RL3.3   Tailored Word Boundaries        - MISSING</li><li>        RL3.4   Tailored Loose Matches          - MISSING</li><li>        RL3.5   Tailored Ranges                 - MISSING</li><li>        RL3.6   Context Matching                - MISSING       [19]</li><li>        RL3.7   Incremental Matches             - MISSING</li><li>      ( RL3.8   Unicode Set Sharing )</li><li>        RL3.9   Possible Match Sets             - MISSING</li><li>        RL3.10  Folded Matching                 - MISSING       [20]</li><li>        RL3.11  Submatchers                     - MISSING</li><li></li><li>        [17] see UAX#10 "Unicode Collation Algorithms"</li><li>        [18] have Unicode::Collate but not integrated to regexes</li><li>        [19] have (?&lt;=x) and (?=x), but look-aheads or look-behinds should see</li><li>             outside of the target substring</li><li>        [20] need insensitive matching for linguistic features other than case;</li><li>             for example, hiragana to katakana, wide and narrow, simplified Han</li><li>             to traditional Han (see UTR#30 "Character Foldings")</li></ol></pre></li>
</ul>
<a name="Unicode-Encodings"></a><h2>Unicode Encodings</h2>
<p>Unicode characters are assigned to <i>code points</i>, which are abstract
numbers.  To use these numbers, various encodings are needed.</p>
<ul>
<li>
<p>UTF-8</p>
<p>UTF-8 is a variable-length (1 to 6 bytes, current character allocations
require 4 bytes), byte-order independent encoding. For ASCII (and we
really do mean 7-bit ASCII, not another 8-bit encoding), UTF-8 is
transparent.</p>
<p>The following table is from Unicode 3.2.</p>
<pre class="verbatim"><ol><li> Code Points		1st Byte  2nd Byte  3rd Byte  4th Byte</li><li></li><li>   U+0000..U+007F	00..7F</li><li>   U+0080..U+07FF     * C2..DF    80..BF</li><li>   U+0800..U+0FFF	E0      * A0..BF    80..BF</li><li>   U+1000..U+CFFF       E1..EC    80..BF    80..BF</li><li>   U+D000..U+D7FF       ED        80..9F    80..BF</li><li>   U+D800..U+DFFF       +++++++ utf16 surrogates, not legal utf8 +++++++</li><li>   U+E000..U+FFFF       EE..EF    80..BF    80..BF</li><li>  U+10000..U+3FFFF	F0      * 90..BF    80..BF    80..BF</li><li>  U+40000..U+FFFFF	F1..F3    80..BF    80..BF    80..BF</li><li> U+100000..U+10FFFF	F4        80..8F    80..BF    80..BF</li></ol></pre><p>Note the gaps before several of the byte entries above marked by '*'.  These are
caused by legal UTF-8 avoiding non-shortest encodings: it is technically
possible to UTF-8-encode a single code point in different ways, but that is
explicitly forbidden, and the shortest possible encoding should always be used
(and that is what Perl does).</p>
<p>Another way to look at it is via bits:</p>
<pre class="verbatim"><ol><li> Code Points                    1st Byte   2nd Byte  3rd Byte  4th Byte</li><li></li><li>                    0aaaaaaa     0aaaaaaa</li><li>            00000bbbbbaaaaaa     110bbbbb  10aaaaaa</li><li>            ccccbbbbbbaaaaaa     1110cccc  10bbbbbb  10aaaaaa</li><li>  00000dddccccccbbbbbbaaaaaa     11110ddd  10cccccc  10bbbbbb  10aaaaaa</li></ol></pre><p>As you can see, the continuation bytes all begin with "10", and the
leading bits of the start byte tell how many bytes there are in the
encoded character.</p>
</li>
<li>
<p>UTF-EBCDIC</p>
<p>Like UTF-8 but EBCDIC-safe, in the way that UTF-8 is ASCII-safe.</p>
</li>
<li>
<p>UTF-16, UTF-16BE, UTF-16LE, Surrogates, and BOMs (Byte Order Marks)</p>
<p>The followings items are mostly for reference and general Unicode
knowledge, Perl doesn't use these constructs internally.</p>
<p>UTF-16 is a 2 or 4 byte encoding.  The Unicode code points
<code class="inline"><span class="w">U</span>+<span class="n">0000</span>..<span class="w">U</span>+<span class="w">FFFF</span></code>
 are stored in a single 16-bit unit, and the code
points <code class="inline">U+10000..U+10FFFF</code> in two 16-bit units.  The latter case is
using <i>surrogates</i>, the first 16-bit unit being the <i>high
surrogate</i>, and the second being the <i>low surrogate</i>.</p>
<p>Surrogates are code points set aside to encode the <code class="inline">U+10000..U+10FFFF</code>
range of Unicode code points in pairs of 16-bit units.  The <i>high
surrogates</i> are the range <code class="inline"><span class="w">U</span>+<span class="w">D800</span>..<span class="w">U</span>+<span class="w">DBFF</span></code>
 and the <i>low surrogates</i>
are the range <code class="inline"><span class="w">U</span>+<span class="w">DC00</span>..<span class="w">U</span>+<span class="w">DFFF</span></code>
.  The surrogate encoding is</p>
<pre class="verbatim"><ol><li>	<span class="i">$hi</span> = <span class="s">(</span><span class="i">$uni</span> - <span class="n">0x10000</span><span class="s">)</span> / <span class="n">0x400</span> + <span class="n">0xD800</span><span class="sc">;</span></li><li>	<span class="i">$lo</span> = <span class="s">(</span><span class="i">$uni</span> - <span class="n">0x10000</span><span class="s">)</span> % <span class="n">0x400</span> + <span class="n">0xDC00</span><span class="sc">;</span></li></ol></pre><p>and the decoding is</p>
<pre class="verbatim"><ol><li>	<span class="i">$uni</span> = <span class="n">0x10000</span> + <span class="s">(</span><span class="i">$hi</span> - <span class="n">0xD800</span><span class="s">)</span> * <span class="n">0x400</span> + <span class="s">(</span><span class="i">$lo</span> - <span class="n">0xDC00</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If you try to generate surrogates (for example by using chr()), you
will get a warning, if warnings are turned on, because those code
points are not valid for a Unicode character.</p>
<p>Because of the 16-bitness, UTF-16 is byte-order dependent.  UTF-16
itself can be used for in-memory computations, but if storage or
transfer is required either UTF-16BE (big-endian) or UTF-16LE
(little-endian) encodings must be chosen.</p>
<p>This introduces another problem: what if you just know that your data
is UTF-16, but you don't know which endianness?  Byte Order Marks, or
BOMs, are a solution to this.  A special character has been reserved
in Unicode to function as a byte order marker: the character with the
code point <code class="inline"><span class="w">U</span>+<span class="w">FEFF</span></code>
 is the BOM.</p>
<p>The trick is that if you read a BOM, you will know the byte order,
since if it was written on a big-endian platform, you will read the
bytes <code class="inline">0xFE 0xFF</code>, but if it was written on a little-endian platform,
you will read the bytes <code class="inline">0xFF 0xFE</code>.  (And if the originating platform
was writing in UTF-8, you will read the bytes <code class="inline">0xEF 0xBB 0xBF</code>.)</p>
<p>The way this trick works is that the character with the code point
<code class="inline"><span class="w">U</span>+<span class="w">FFFE</span></code>
 is guaranteed not to be a valid Unicode character, so the
sequence of bytes <code class="inline">0xFF 0xFE</code> is unambiguously "BOM, represented in
little-endian format" and cannot be <code class="inline"><span class="w">U</span>+<span class="w">FFFE</span></code>
, represented in big-endian
format".  (Actually, <code class="inline"><span class="w">U</span>+<span class="w">FFFE</span></code>
 is legal for use by your program, even for
input/output, but better not use it if you need a BOM.  But it is "illegal for
interchange", so that an unsuspecting program won't get confused.)</p>
</li>
<li>
<p>UTF-32, UTF-32BE, UTF-32LE</p>
<p>The UTF-32 family is pretty much like the UTF-16 family, expect that
the units are 32-bit, and therefore the surrogate scheme is not
needed.  The BOM signatures will be <code class="inline">0x00 0x00 0xFE 0xFF</code> for BE and
<code class="inline">0xFF 0xFE 0x00 0x00</code> for LE.</p>
</li>
<li>
<p>UCS-2, UCS-4</p>
<p>Encodings defined by the ISO 10646 standard.  UCS-2 is a 16-bit
encoding.  Unlike UTF-16, UCS-2 is not extensible beyond <code class="inline"><span class="w">U</span>+<span class="w">FFFF</span></code>
,
because it does not use surrogates.  UCS-4 is a 32-bit encoding,
functionally identical to UTF-32.</p>
</li>
<li>
<p>UTF-7</p>
<p>A seven-bit safe (non-eight-bit) encoding, which is useful if the
transport or storage is not eight-bit safe.  Defined by RFC 2152.</p>
</li>
</ul>
<a name="Security-Implications-of-Unicode"></a><h2>Security Implications of Unicode</h2>
<p>Read <a href="http://search.cpan.org/perldoc/http:#%2fwww.unicode.org%2freports%2ftr36">Unicode Security Considerations</a>.
Also, note the following:</p>
<ul>
<li>
<p>Malformed UTF-8</p>
<p>Unfortunately, the specification of UTF-8 leaves some room for
interpretation of how many bytes of encoded output one should generate
from one input Unicode character.  Strictly speaking, the shortest
possible sequence of UTF-8 bytes should be generated,
because otherwise there is potential for an input buffer overflow at
the receiving end of a UTF-8 connection.  Perl always generates the
shortest length UTF-8, and with warnings on, Perl will warn about
non-shortest length UTF-8 along with other malformations, such as the
surrogates, which are not real Unicode code points.</p>
</li>
<li>
<p>Regular expressions behave slightly differently between byte data and
character (Unicode) data.  For example, the "word character" character
class <code class="inline">\<span class="w">w</span></code>
 will work differently depending on if data is eight-bit bytes
or Unicode.</p>
<p>In the first case, the set of <code class="inline">\<span class="w">w</span></code>
 characters is either small--the
default set of alphabetic characters, digits, and the "_"--or, if you
are using a locale (see <a href="perllocale.html">perllocale</a>), the <code class="inline">\<span class="w">w</span></code>
 might contain a few
more letters according to your language and country.</p>
<p>In the second case, the <code class="inline">\<span class="w">w</span></code>
 set of characters is much, much larger.
Most importantly, even in the set of the first 256 characters, it will
probably match different characters: unlike most locales, which are
specific to a language and country pair, Unicode classifies all the
characters that are letters <i>somewhere</i> as <code class="inline">\<span class="w">w</span></code>
.  For example, your
locale might not think that LATIN SMALL LETTER ETH is a letter (unless
you happen to speak Icelandic), but Unicode does.</p>
<p>As discussed elsewhere, Perl has one foot (two hooves?) planted in
each of two worlds: the old world of bytes and the new world of
characters, upgrading from bytes to characters when necessary.
If your legacy code does not explicitly use Unicode, no automatic
switch-over to characters should happen.  Characters shouldn't get
downgraded to bytes, either.  It is possible to accidentally mix bytes
and characters, however (see <a href="perluniintro.html">perluniintro</a>), in which case <code class="inline">\<span class="w">w</span></code>
 in
regular expressions might start behaving differently.  Review your
code.  Use warnings and the <code class="inline"><span class="w">strict</span></code>
 pragma.</p>
</li>
</ul>
<a name="Unicode-in-Perl-on-EBCDIC"></a><h2>Unicode in Perl on EBCDIC</h2>
<p>The way Unicode is handled on EBCDIC platforms is still
experimental.  On such platforms, references to UTF-8 encoding in this
document and elsewhere should be read as meaning the UTF-EBCDIC
specified in Unicode Technical Report 16, unless ASCII vs. EBCDIC issues
are specifically discussed. There is no <code class="inline"><span class="w">utfebcdic</span></code>
 pragma or
":utfebcdic" layer; rather, "utf8" and ":utf8" are reused to mean
the platform's "natural" 8-bit encoding of Unicode. See <a href="perlebcdic.html">perlebcdic</a>
for more discussion of the issues.</p>
<a name="Locales"></a><h2>Locales</h2>
<p>Usually locale settings and Unicode do not affect each other, but
there are a couple of exceptions:</p>
<ul>
<li>
<p>You can enable automatic UTF-8-ification of your standard file
handles, default <code class="inline"><a class="l_k" href="functions/open.html">open()</a></code> layer, and <code class="inline"><span class="i">@ARGV</span></code>
 by using either
the <code class="inline">-C</code>
 command line switch or the <code class="inline"><span class="w">PERL_UNICODE</span></code>
 environment
variable, see <a href="perlrun.html">perlrun</a> for the documentation of the <code class="inline">-C</code>
 switch.</p>
</li>
<li>
<p>Perl tries really hard to work both with Unicode and the old
byte-oriented world. Most often this is nice, but sometimes Perl's
straddling of the proverbial fence causes problems.</p>
</li>
</ul>
<a name="When-Unicode-Does-Not-Happen"></a><h2>When Unicode Does Not Happen</h2>
<p>While Perl does have extensive ways to input and output in Unicode,
and few other 'entry points' like the @ARGV which can be interpreted
as Unicode (UTF-8), there still are many places where Unicode (in some
encoding or another) could be given as arguments or received as
results, or both, but it is not.</p>
<p>The following are such interfaces.  Also, see <a href="#The-%22Unicode-Bug%22">The Unicode Bug</a>.
For all of these interfaces Perl
currently (as of 5.8.3) simply assumes byte strings both as arguments
and results, or UTF-8 strings if the <code class="inline"><span class="w">encoding</span></code>
 pragma has been used.</p>
<p>One reason why Perl does not attempt to resolve the role of Unicode in
these cases is that the answers are highly dependent on the operating
system and the file system(s).  For example, whether filenames can be
in Unicode, and in exactly what kind of encoding, is not exactly a
portable concept.  Similarly for the qx and system: how well will the
'command line interface' (and which of them?) handle Unicode?</p>
<ul>
<li>
<p>chdir, chmod, chown, chroot, exec, link, lstat, mkdir,
rename, rmdir, stat, symlink, truncate, unlink, utime, -X</p>
</li>
<li>
<p>%ENV</p>
</li>
<li>
<p>glob (aka the &lt;*&gt;)</p>
</li>
<li>
<p>open, opendir, sysopen</p>
</li>
<li>
<p>qx (aka the backtick operator), system</p>
</li>
<li>
<p>readdir, readlink</p>
</li>
</ul>
<a name="The-%22Unicode-Bug%22"></a><h2>The "Unicode Bug"</h2>
<p>The term, the "Unicode bug" has been applied to an inconsistency with the
Unicode characters whose ordinals are in the Latin-1 Supplement block, that
is, between 128 and 255.  Without a locale specified, unlike all other
characters or code points, these characters have very different semantics in
byte semantics versus character semantics.</p>
<p>In character semantics they are interpreted as Unicode code points, which means
they have the same semantics as Latin-1 (ISO-8859-1).</p>
<p>In byte semantics, they are considered to be unassigned characters, meaning
that the only semantics they have is their ordinal numbers, and that they are
not members of various character classes.  None are considered to match <code class="inline">\<span class="w">w</span></code>

for example, but all match <code class="inline">\<span class="w">W</span></code>
.  (On EBCDIC platforms, the behavior may
be different from this, depending on the underlying C language library
functions.)</p>
<p>The behavior is known to have effects on these areas:</p>
<ul>
<li>
<p>Changing the case of a scalar, that is, using <code class="inline"><a class="l_k" href="functions/uc.html">uc()</a></code>, <code class="inline"><a class="l_k" href="functions/ucfirst.html">ucfirst()</a></code>, <code class="inline"><a class="l_k" href="functions/lc.html">lc()</a></code>,
and <code class="inline"><a class="l_k" href="functions/lcfirst.html">lcfirst()</a></code>, or <code class="inline">\<span class="w">L</span></code>
, <code class="inline">\<span class="w">U</span></code>
, <code class="inline">\<span class="w">u</span></code>
 and <code class="inline">\<span class="w">l</span></code>
 in regular expression
substitutions.</p>
</li>
<li>
<p>Using caseless (<code class="inline">/i</code>) regular expression matching</p>
</li>
<li>
<p>Matching a number of properties in regular expressions, such as <code class="inline">\<span class="w">w</span></code>
</p>
</li>
<li>
<p>User-defined case change mappings.  You can create a <code class="inline"><span class="i">ToUpper</span><span class="s">(</span><span class="s">)</span></code>
 function, for
example, which overrides Perl's built-in case mappings.  The scalar must be
encoded in utf8 for your function to actually be invoked.</p>
</li>
</ul>
<p>This behavior can lead to unexpected results in which a string's semantics
suddenly change if a code point above 255 is appended to or removed from it,
which changes the string's semantics from byte to character or vice versa.  As
an example, consider the following program and its output:</p>
<pre class="verbatim"><ol><li> $ perl -le'</li><li>     $s1 = "\xC2";</li><li>     $s2 = "\x{2660}";</li><li>     for ($s1, $s2, $s1.$s2) {</li><li>         print /\w/ || 0;</li><li>     }</li><li> '</li><li> 0</li><li> 0</li><li> 1</li></ol></pre><p>If there's no <code class="inline">\<span class="w">w</span></code>
 in <code class="inline"><span class="w">s1</span></code>
 or in <code class="inline"><span class="w">s2</span></code>
, why does their concatenation have one?</p>
<p>This anomaly stems from Perl's attempt to not disturb older programs that
didn't use Unicode, and hence had no semantics for characters outside of the
ASCII range (except in a locale), along with Perl's desire to add Unicode
support seamlessly.  The result wasn't seamless: these characters were
orphaned.</p>
<p>Work is being done to correct this, but only some of it was complete in time
for the 5.12 release.  What has been finished is the important part of the case
changing component.  Due to concerns, and some evidence, that older code might
have come to rely on the existing behavior, the new behavior must be explicitly
enabled by the feature <code class="inline"><span class="w">unicode_strings</span></code>
 in the <a href="feature.html">feature</a> pragma, even though
no new syntax is involved.</p>
<p>See <a href="functions/lc.html">lc</a> for details on how this pragma works in combination with
various others for casing.  Even though the pragma only affects casing
operations in the 5.12 release, it is planned to have it affect all the
problematic behaviors in later releases: you can't have one without them all.</p>
<p>In the meantime, a workaround is to always call utf8::upgrade($string), or to
use the standard module <a href="Encode.html">Encode</a>.   Also, a scalar that has any characters
whose ordinal is above 0x100, or which were specified using either of the
<code class="inline">\<span class="i">N</span><span class="s">{</span>...<span class="s">}</span></code>
 notations will automatically have character semantics.</p>
<a name="Forcing-Unicode-in-Perl-(Or-Unforcing-Unicode-in-Perl)"></a><h2>Forcing Unicode in Perl (Or Unforcing Unicode in Perl)</h2>
<p>Sometimes (see <a href="#When-Unicode-Does-Not-Happen">When Unicode Does Not Happen</a> or <a href="#The-%22Unicode-Bug%22">The Unicode Bug</a>)
there are situations where you simply need to force a byte
string into UTF-8, or vice versa.  The low-level calls
utf8::upgrade($bytestring) and utf8::downgrade($utf8string[, FAIL_OK]) are
the answers.</p>
<p>Note that utf8::downgrade() can fail if the string contains characters
that don't fit into a byte.</p>
<p>Calling either function on a string that already is in the desired state is a
no-op.</p>
<a name="Using-Unicode-in-XS"></a><h2>Using Unicode in XS</h2>
<p>If you want to handle Perl Unicode in XS extensions, you may find the
following C APIs useful.  See also <a href="perlguts.html#Unicode-Support">Unicode Support in perlguts</a> for an
explanation about Unicode at the XS level, and <a href="perlapi.html">perlapi</a> for the API
details.</p>
<ul>
<li>
<p><code class="inline"><span class="i">DO_UTF8</span><span class="s">(</span><span class="w">sv</span><span class="s">)</span></code>
 returns true if the <code class="inline"><span class="w">UTF8</span></code>
 flag is on and the bytes
pragma is not in effect.  <code class="inline"><span class="i">SvUTF8</span><span class="s">(</span><span class="w">sv</span><span class="s">)</span></code>
 returns true if the <code class="inline"><span class="w">UTF8</span></code>

flag is on; the bytes pragma is ignored.  The <code class="inline"><span class="w">UTF8</span></code>
 flag being on
does <b>not</b> mean that there are any characters of code points greater
than 255 (or 127) in the scalar or that there are even any characters
in the scalar.  What the <code class="inline"><span class="w">UTF8</span></code>
 flag means is that the sequence of
octets in the representation of the scalar is the sequence of UTF-8
encoded code points of the characters of a string.  The <code class="inline"><span class="w">UTF8</span></code>
 flag
being off means that each octet in this representation encodes a
single character with code point 0..255 within the string.  Perl's
Unicode model is not to use UTF-8 until it is absolutely necessary.</p>
</li>
<li>
<p><code class="inline"><span class="i">uvchr_to_utf8</span><span class="s">(</span><span class="w">buf</span><span class="cm">,</span> <a class="l_k" href="functions/chr.html">chr</a><span class="s">)</span></code>
 writes a Unicode character code point into
a buffer encoding the code point as UTF-8, and returns a pointer
pointing after the UTF-8 bytes.  It works appropriately on EBCDIC machines.</p>
</li>
<li>
<p><code class="inline"><span class="i">utf8_to_uvchr</span><span class="s">(</span><span class="w">buf</span><span class="cm">,</span> <span class="w">lenp</span><span class="s">)</span></code>
 reads UTF-8 encoded bytes from a buffer and
returns the Unicode character code point and, optionally, the length of
the UTF-8 byte sequence.  It works appropriately on EBCDIC machines.</p>
</li>
<li>
<p><code class="inline"><span class="i">utf8_length</span><span class="s">(</span><span class="w">start</span><span class="cm">,</span> <span class="w">end</span><span class="s">)</span></code>
 returns the length of the UTF-8 encoded buffer
in characters.  <code class="inline"><span class="i">sv_len_utf8</span><span class="s">(</span><span class="w">sv</span><span class="s">)</span></code>
 returns the length of the UTF-8 encoded
scalar.</p>
</li>
<li>
<p><code class="inline"><span class="i">sv_utf8_upgrade</span><span class="s">(</span><span class="w">sv</span><span class="s">)</span></code>
 converts the string of the scalar to its UTF-8
encoded form.  <code class="inline"><span class="i">sv_utf8_downgrade</span><span class="s">(</span><span class="w">sv</span><span class="s">)</span></code>
 does the opposite, if
possible.  <code class="inline"><span class="i">sv_utf8_encode</span><span class="s">(</span><span class="w">sv</span><span class="s">)</span></code>
 is like sv_utf8_upgrade except that
it does not set the <code class="inline"><span class="w">UTF8</span></code>
 flag.  <code class="inline"><span class="i">sv_utf8_decode</span><span class="s">(</span><span class="s">)</span></code>
 does the
opposite of <code class="inline"><span class="i">sv_utf8_encode</span><span class="s">(</span><span class="s">)</span></code>
.  Note that none of these are to be
used as general-purpose encoding or decoding interfaces: <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span></code>

for that.  <code class="inline"><span class="i">sv_utf8_upgrade</span><span class="s">(</span><span class="s">)</span></code>
 is affected by the encoding pragma
but <code class="inline"><span class="i">sv_utf8_downgrade</span><span class="s">(</span><span class="s">)</span></code>
 is not (since the encoding pragma is
designed to be a one-way street).</p>
</li>
<li>
<p><code class="inline">is_utf8_char(s)</code> returns true if the pointer points to a valid UTF-8
character.</p>
</li>
<li>
<p><code class="inline"><span class="i">is_utf8_string</span><span class="s">(</span><span class="w">buf</span><span class="cm">,</span> <span class="w">len</span><span class="s">)</span></code>
 returns true if <code class="inline"><span class="w">len</span></code>
 bytes of the buffer
are valid UTF-8.</p>
</li>
<li>
<p><code class="inline"><span class="i">UTF8SKIP</span><span class="s">(</span><span class="w">buf</span><span class="s">)</span></code>
 will return the number of bytes in the UTF-8 encoded
character in the buffer.  <code class="inline"><span class="i">UNISKIP</span><span class="s">(</span><a class="l_k" href="functions/chr.html">chr</a><span class="s">)</span></code>
 will return the number of bytes
required to UTF-8-encode the Unicode character code point.  <code class="inline"><span class="i">UTF8SKIP</span><span class="s">(</span><span class="s">)</span></code>

is useful for example for iterating over the characters of a UTF-8
encoded buffer; <code class="inline"><span class="i">UNISKIP</span><span class="s">(</span><span class="s">)</span></code>
 is useful, for example, in computing
the size required for a UTF-8 encoded buffer.</p>
</li>
<li>
<p><code class="inline"><span class="i">utf8_distance</span><span class="s">(</span><span class="w">a</span><span class="cm">,</span> <span class="w">b</span><span class="s">)</span></code>
 will tell the distance in characters between the
two pointers pointing to the same UTF-8 encoded buffer.</p>
</li>
<li>
<p><code class="inline">utf8_hop(s, off)</code> will return a pointer to a UTF-8 encoded buffer
that is <code class="inline"><span class="w">off</span></code>
 (positive or negative) Unicode characters displaced
from the UTF-8 buffer <code class="inline"><a class="l_k" href="functions/s.html">s</a></code>.  Be careful not to overstep the buffer:
<code class="inline"><span class="i">utf8_hop</span><span class="s">(</span><span class="s">)</span></code>
 will merrily run off the end or the beginning of the
buffer if told to do so.</p>
</li>
<li>
<p><code class="inline"><span class="i">pv_uni_display</span><span class="s">(</span><span class="w">dsv</span><span class="cm">,</span> <span class="w">spv</span><span class="cm">,</span> <span class="w">len</span><span class="cm">,</span> <span class="w">pvlim</span><span class="cm">,</span> <span class="w">flags</span><span class="s">)</span></code>
 and
<code class="inline"><span class="i">sv_uni_display</span><span class="s">(</span><span class="w">dsv</span><span class="cm">,</span> <span class="w">ssv</span><span class="cm">,</span> <span class="w">pvlim</span><span class="cm">,</span> <span class="w">flags</span><span class="s">)</span></code>
 are useful for debugging the
output of Unicode strings and scalars.  By default they are useful
only for debugging--they display <b>all</b> characters as hexadecimal code
points--but with the flags <code class="inline"><span class="w">UNI_DISPLAY_ISPRINT</span></code>
,
<code class="inline"><span class="w">UNI_DISPLAY_BACKSLASH</span></code>
, and <code class="inline"><span class="w">UNI_DISPLAY_QQ</span></code>
 you can make the
output more readable.</p>
</li>
<li>
<p><code class="inline"><span class="i">ibcmp_utf8</span><span class="s">(</span><span class="w">s1</span><span class="cm">,</span> <span class="w">pe1</span><span class="cm">,</span> <span class="w">l1</span><span class="cm">,</span> <span class="w">u1</span><span class="cm">,</span> <span class="w">s2</span><span class="cm">,</span> <span class="w">pe2</span><span class="cm">,</span> <span class="w">l2</span><span class="cm">,</span> <span class="w">u2</span><span class="s">)</span></code>
 can be used to
compare two strings case-insensitively in Unicode.  For case-sensitive
comparisons you can just use <code class="inline"><span class="i">memEQ</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">memNE</span><span class="s">(</span><span class="s">)</span></code>
 as usual.</p>
</li>
</ul>
<p>For more information, see <a href="perlapi.html">perlapi</a>, and <i>utf8.c</i> and <i>utf8.h</i>
in the Perl source code distribution.</p>
<a name="Hacking-Perl-to-work-on-earlier-Unicode-versions-(for-very-serious-hackers-only)"></a><h2>Hacking Perl to work on earlier Unicode versions (for very serious hackers only)</h2>
<p>Perl by default comes with the latest supported Unicode version built in, but
you can change to use any earlier one.</p>
<p>Download the files in the version of Unicode that you want from the Unicode web
site <a href="http://www.unicode.org">http://www.unicode.org</a>).  These should replace the existing files in
<code class="inline">\<span class="i">$Config</span>{<span class="w">privlib</span>}</code>
/<i>unicore</i>.  (<code class="inline">\<span class="i">%Config</span></code>
 is available from the Config
module.)  Follow the instructions in <i>README.perl</i> in that directory to change
some of their names, and then run <i>make</i>.</p>
<p>It is even possible to download them to a different directory, and then change
<i>utf8_heavy.pl</i> in the directory <code class="inline">\<span class="i">$Config</span>{<span class="w">privlib</span>}</code>
 to point to the new
directory, or maybe make a copy of that directory before making the change, and
using <code class="inline"><span class="i">@INC</span></code>
 or the <code class="inline">-<span class="w">I</span></code>
 run-time flag to switch between versions at will
(but because of caching, not in the middle of a process), but all this is
beyond the scope of these instructions.</p>
<a name="BUGS"></a><h1>BUGS</h1>
<a name="Interaction-with-Locales"></a><h2>Interaction with Locales</h2>
<p>Use of locales with Unicode data may lead to odd results.  Currently,
Perl attempts to attach 8-bit locale info to characters in the range
0..255, but this technique is demonstrably incorrect for locales that
use characters above that range when mapped into Unicode.  Perl's
Unicode support will also tend to run slower.  Use of locales with
Unicode is discouraged.</p>
<a name="Problems-with-characters-in-the-Latin-1-Supplement-range"></a><h2>Problems with characters in the Latin-1 Supplement range</h2>
<p>See <a href="#The-%22Unicode-Bug%22">The Unicode Bug</a></p>
<a name="Problems-with-case-insensitive-regular-expression-matching"></a><h2>Problems with case-insensitive regular expression matching</h2>
<p>There are problems with case-insensitive matches, including those involving
character classes (enclosed in [square brackets]), characters whose fold
is to multiple characters (such as the single character LATIN SMALL LIGATURE
FFL matches case-insensitively with the 3-character string <code class="inline"><span class="w">ffl</span></code>
), and
characters in the Latin-1 Supplement.</p>
<a name="Interaction-with-Extensions"></a><h2>Interaction with Extensions</h2>
<p>When Perl exchanges data with an extension, the extension should be
able to understand the UTF8 flag and act accordingly. If the
extension doesn't know about the flag, it's likely that the extension
will return incorrectly-flagged data.</p>
<p>So if you're working with Unicode data, consult the documentation of
every module you're using if there are any issues with Unicode data
exchange. If the documentation does not talk about Unicode at all,
suspect the worst and probably look at the source to learn how the
module is implemented. Modules written completely in Perl shouldn't
cause problems. Modules that directly or indirectly access code written
in other programming languages are at risk.</p>
<p>For affected functions, the simple strategy to avoid data corruption is
to always make the encoding of the exchanged data explicit. Choose an
encoding that you know the extension can handle. Convert arguments passed
to the extensions to that encoding and convert results back from that
encoding. Write wrapper functions that do the conversions for you, so
you can later change the functions when the extension catches up.</p>
<p>To provide an example, let's say the popular Foo::Bar::escape_html
function doesn't deal with Unicode data yet. The wrapper function
would convert the argument to raw UTF-8 and convert the result back to
Perl's internal representation like so:</p>
<pre class="verbatim"><ol><li><a name="my_escape_html"></a>    sub <span class="m">my_escape_html ($)</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$what</span><span class="s">)</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>      <a class="l_k" href="functions/return.html">return</a> unless <a class="l_k" href="functions/defined.html">defined</a> <span class="i">$what</span><span class="sc">;</span></li><li>      <span class="i">Encode::decode_utf8</span><span class="s">(</span><span class="i">Foo::Bar::escape_html</span><span class="s">(</span><span class="i">Encode::encode_utf8</span><span class="s">(</span><span class="i">$what</span><span class="s">)</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Sometimes, when the extension does not convert data but just stores
and retrieves them, you will be in a position to use the otherwise
dangerous Encode::_utf8_on() function. Let's say the popular
<code class="inline"><span class="w">Foo::Bar</span></code>
 extension, written in C, provides a <code class="inline"><span class="w">param</span></code>
 method that
lets you store and retrieve data according to these prototypes:</p>
<pre class="verbatim"><ol><li>    <span class="i">$self</span><span class="i">-&gt;param</span><span class="s">(</span><span class="i">$name</span><span class="cm">,</span> <span class="i">$value</span><span class="s">)</span><span class="sc">;</span>            <span class="c"># set a scalar</span></li><li>    <span class="i">$value</span> = <span class="i">$self</span><span class="i">-&gt;param</span><span class="s">(</span><span class="i">$name</span><span class="s">)</span><span class="sc">;</span>           <span class="c"># retrieve a scalar</span></li></ol></pre><p>If it does not yet provide support for any encoding, one could write a
derived class with such a <code class="inline"><span class="w">param</span></code>
 method:</p>
<pre class="verbatim"><ol><li><a name="param"></a>    sub <span class="m">param</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$self</span><span class="cm">,</span><span class="i">$name</span><span class="cm">,</span><span class="i">$value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>      <span class="i">utf8::upgrade</span><span class="s">(</span><span class="i">$name</span><span class="s">)</span><span class="sc">;</span>     <span class="c"># make sure it is UTF-8 encoded</span></li><li>      if <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a> <span class="i">$value</span><span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">utf8::upgrade</span><span class="s">(</span><span class="i">$value</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># make sure it is UTF-8 encoded</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="i">-&gt;SUPER::param</span><span class="s">(</span><span class="i">$name</span><span class="cm">,</span><span class="i">$value</span><span class="s">)</span><span class="sc">;</span></li><li>      <span class="s">}</span> else <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$ret</span> = <span class="i">$self</span><span class="i">-&gt;SUPER::param</span><span class="s">(</span><span class="i">$name</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="i">Encode::_utf8_on</span><span class="s">(</span><span class="i">$ret</span><span class="s">)</span><span class="sc">;</span> <span class="c"># we know, it is UTF-8 encoded</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">$ret</span><span class="sc">;</span></li><li>      <span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><p>Some extensions provide filters on data entry/exit points, such as
DB_File::filter_store_key and family. Look out for such filters in
the documentation of your extensions, they can make the transition to
Unicode data much easier.</p>
<a name="Speed"></a><h2>Speed</h2>
<p>Some functions are slower when working on UTF-8 encoded strings than
on byte encoded strings.  All functions that need to hop over
characters such as length(), substr() or index(), or matching regular
expressions can work <b>much</b> faster when the underlying data are
byte-encoded.</p>
<p>In Perl 5.8.0 the slowness was often quite spectacular; in Perl 5.8.1
a caching scheme was introduced which will hopefully make the slowness
somewhat less spectacular, at least for some operations.  In general,
operations with UTF-8 encoded strings are still slower. As an example,
the Unicode properties (character classes) like <code class="inline">\<span class="i">p</span><span class="s">{</span><span class="w">Nd</span><span class="s">}</span></code>
 are known to
be quite a bit slower (5-20 times) than their simpler counterparts
like <code class="inline">\<span class="w">d</span></code>
 (then again, there 268 Unicode characters matching <code class="inline"><span class="w">Nd</span></code>

compared with the 10 ASCII characters matching <code class="inline"><span class="w">d</span></code>
).</p>
<a name="Problems-on-EBCDIC-platforms"></a><h2>Problems on EBCDIC platforms</h2>
<p>There are a number of known problems with Perl on EBCDIC platforms.  If you
want to use Perl there, send email to perlbug@perl.org.</p>
<p>In earlier versions, when byte and character data were concatenated,
the new string was sometimes created by
decoding the byte strings as <i>ISO 8859-1 (Latin-1)</i>, even if the
old Unicode string used EBCDIC.</p>
<p>If you find any of these, please report them as bugs.</p>
<a name="Porting-code-from-perl-5.6.X"></a><h2>Porting code from perl-5.6.X</h2>
<p>Perl 5.8 has a different Unicode model from 5.6. In 5.6 the programmer
was required to use the <code class="inline"><span class="w">utf8</span></code>
 pragma to declare that a given scope
expected to deal with Unicode data and had to make sure that only
Unicode data were reaching that scope. If you have code that is
working with 5.6, you will need some of the following adjustments to
your code. The examples are written such that the code will continue
to work under 5.6, so you should be safe to try them out.</p>
<ul>
<li>
<p>A filehandle that should read or write UTF-8</p>
<pre class="verbatim"><ol><li>  if <span class="s">(</span><span class="i">$]</span> &gt; <span class="n">5.007</span><span class="s">)</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/binmode.html">binmode</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;:encoding(utf8)&quot;</span><span class="sc">;</span></li><li>  <span class="s">}</span></li></ol></pre></li>
<li>
<p>A scalar that is going to be passed to some extension</p>
<p>Be it Compress::Zlib, Apache::Request or any extension that has no
mention of Unicode in the manpage, you need to make sure that the
UTF8 flag is stripped off. Note that at the time of this writing
(October 2002) the mentioned modules are not UTF-8-aware. Please
check the documentation to verify if this is still true.</p>
<pre class="verbatim"><ol><li>  if <span class="s">(</span><span class="i">$]</span> &gt; <span class="n">5.007</span><span class="s">)</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/require.html">require</a> <span class="w">Encode</span><span class="sc">;</span></li><li>    <span class="i">$val</span> = <span class="i">Encode::encode_utf8</span><span class="s">(</span><span class="i">$val</span><span class="s">)</span><span class="sc">;</span> <span class="c"># make octets</span></li><li>  <span class="s">}</span></li></ol></pre></li>
<li>
<p>A scalar we got back from an extension</p>
<p>If you believe the scalar comes back as UTF-8, you will most likely
want the UTF8 flag restored:</p>
<pre class="verbatim"><ol><li>  if <span class="s">(</span><span class="i">$]</span> &gt; <span class="n">5.007</span><span class="s">)</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/require.html">require</a> <span class="w">Encode</span><span class="sc">;</span></li><li>    <span class="i">$val</span> = <span class="i">Encode::decode_utf8</span><span class="s">(</span><span class="i">$val</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span></li></ol></pre></li>
<li>
<p>Same thing, if you are really sure it is UTF-8</p>
<pre class="verbatim"><ol><li>  if <span class="s">(</span><span class="i">$]</span> &gt; <span class="n">5.007</span><span class="s">)</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/require.html">require</a> <span class="w">Encode</span><span class="sc">;</span></li><li>    <span class="i">Encode::_utf8_on</span><span class="s">(</span><span class="i">$val</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">}</span></li></ol></pre></li>
<li>
<p>A wrapper for fetchrow_array and fetchrow_hashref</p>
<p>When the database contains only UTF-8, a wrapper function or method is
a convenient way to replace all your fetchrow_array and
fetchrow_hashref calls. A wrapper function will also make it easier to
adapt to future enhancements in your database driver. Note that at the
time of this writing (October 2002), the DBI has no standardized way
to deal with UTF-8 data. Please check the documentation to verify if
that is still true.</p>
<pre class="verbatim"><ol><li><a name="fetchrow"></a>  sub <span class="m">fetchrow</span> <span class="s">{</span></li><li>    <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$self</span><span class="cm">,</span> <span class="i">$sth</span><span class="cm">,</span> <span class="i">$what</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span> <span class="c"># $what is one of fetchrow_{array,hashref}</span></li><li>    if <span class="s">(</span><span class="i">$]</span> &lt; <span class="n">5.007</span><span class="s">)</span> <span class="s">{</span></li><li>      <a class="l_k" href="functions/return.html">return</a> <span class="i">$sth</span><span class="i">-&gt;$what</span><span class="sc">;</span></li><li>    <span class="s">}</span> else <span class="s">{</span></li><li>      <a class="l_k" href="functions/require.html">require</a> <span class="w">Encode</span><span class="sc">;</span></li><li>      if <span class="s">(</span><a class="l_k" href="functions/wantarray.html">wantarray</a><span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">@arr</span> = <span class="i">$sth</span><span class="i">-&gt;$what</span><span class="sc">;</span></li><li>        for <span class="s">(</span><span class="i">@arr</span><span class="s">)</span> <span class="s">{</span></li><li>          <a class="l_k" href="functions/defined.html">defined</a> &amp;&amp; <span class="q">/[^\000-\177]/</span> &amp;&amp; <span class="i">Encode::_utf8_on</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>        <a class="l_k" href="functions/return.html">return</a> <span class="i">@arr</span><span class="sc">;</span></li><li>      <span class="s">}</span> else <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$ret</span> = <span class="i">$sth</span><span class="i">-&gt;$what</span><span class="sc">;</span></li><li>        if <span class="s">(</span><a class="l_k" href="functions/ref.html">ref</a> <span class="i">$ret</span><span class="s">)</span> <span class="s">{</span></li><li>          for <a class="l_k" href="functions/my.html">my</a> <span class="i">$k</span> <span class="s">(</span><a class="l_k" href="functions/keys.html">keys</a> <span class="i">%$ret</span><span class="s">)</span> <span class="s">{</span></li><li>            <a class="l_k" href="functions/defined.html">defined</a> &amp;&amp; <span class="q">/[^\000-\177]/</span> &amp;&amp; <span class="i">Encode::_utf8_on</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span> for <span class="i">$ret</span>-&gt;{<span class="i">$k</span>}<span class="sc">;</span></li><li>          <span class="s">}</span></li><li>          <a class="l_k" href="functions/return.html">return</a> <span class="i">$ret</span><span class="sc">;</span></li><li>        <span class="s">}</span> else <span class="s">{</span></li><li>          <a class="l_k" href="functions/defined.html">defined</a> &amp;&amp; <span class="q">/[^\000-\177]/</span> &amp;&amp; <span class="i">Encode::_utf8_on</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span> for <span class="i">$ret</span><span class="sc">;</span></li><li>          <a class="l_k" href="functions/return.html">return</a> <span class="i">$ret</span><span class="sc">;</span></li><li>        <span class="s">}</span></li><li>      <span class="s">}</span></li><li>    <span class="s">}</span></li><li>  <span class="s">}</span></li></ol></pre></li>
<li>
<p>A large scalar that you know can only contain ASCII</p>
<p>Scalars that contain only ASCII and are marked as UTF-8 are sometimes
a drag to your program. If you recognize such a situation, just remove
the UTF8 flag:</p>
<pre class="verbatim"><ol><li>  <span class="i">utf8::downgrade</span><span class="s">(</span><span class="i">$val</span><span class="s">)</span> if <span class="i">$]</span> &gt; <span class="n">5.007</span><span class="sc">;</span></li></ol></pre></li>
</ul>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p><a href="perlunitut.html">perlunitut</a>, <a href="perluniintro.html">perluniintro</a>, <a href="perluniprops.html">perluniprops</a>, <a href="Encode.html">Encode</a>, <a href="open.html">open</a>, <a href="utf8.html">utf8</a>, <a href="bytes.html">bytes</a>,
<a href="perlretut.html">perlretut</a>, <a href="perlvar.html#%24%7b%5eUNICODE%7d">${^UNICODE} in perlvar</a>
<a href="http://www.unicode.org/reports/tr44">http://www.unicode.org/reports/tr44</a>).</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#Important-Caveats">Important Caveats</a><li><a href="#Byte-and-Character-Semantics">Byte and Character Semantics</a><li><a href="#Effects-of-Character-Semantics">Effects of Character Semantics</a><li><a href="#Unicode-Character-Properties">Unicode Character Properties</a><li><a href="#User-Defined-Character-Properties">User-Defined Character Properties</a><li><a href="#User-Defined-Case-Mappings">User-Defined Case Mappings</a><li><a href="#Character-Encodings-for-Input-and-Output">Character Encodings for Input and Output</a><li><a href="#Unicode-Regular-Expression-Support-Level">Unicode Regular Expression Support Level</a><li><a href="#Unicode-Encodings">Unicode Encodings</a><li><a href="#Security-Implications-of-Unicode">Security Implications of Unicode</a><li><a href="#Unicode-in-Perl-on-EBCDIC">Unicode in Perl on EBCDIC</a><li><a href="#Locales">Locales</a><li><a href="#When-Unicode-Does-Not-Happen">When Unicode Does Not Happen</a><li><a href="#The-%22Unicode-Bug%22">The "Unicode Bug"</a><li><a href="#Forcing-Unicode-in-Perl-(Or-Unforcing-Unicode-in-Perl)">Forcing Unicode in Perl (Or Unforcing Unicode in Perl)</a><li><a href="#Using-Unicode-in-XS">Using Unicode in XS</a><li><a href="#Hacking-Perl-to-work-on-earlier-Unicode-versions-(for-very-serious-hackers-only)">Hacking Perl to work on earlier Unicode versions (for very serious hackers only)</a></ul><li><a href="#BUGS">BUGS</a><ul><li><a href="#Interaction-with-Locales">Interaction with Locales</a><li><a href="#Problems-with-characters-in-the-Latin-1-Supplement-range">Problems with characters in the Latin-1 Supplement range</a><li><a href="#Problems-with-case-insensitive-regular-expression-matching">Problems with case-insensitive regular expression matching</a><li><a href="#Interaction-with-Extensions">Interaction with Extensions</a><li><a href="#Speed">Speed</a><li><a href="#Problems-on-EBCDIC-platforms">Problems on EBCDIC platforms</a><li><a href="#Porting-code-from-perl-5.6.X">Porting code from perl-5.6.X</a></ul><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perlunicode';
  perldoc.pageAddress = 'perlunicode.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
